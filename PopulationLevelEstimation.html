<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 13 Population-Level Estimation | The Book of OHDSI</title>
  <meta name="description" content="A book about the Observational Health Data Science and Informatics (OHDS). It described the OHDSI community, open standards and open source software." />
  <meta name="generator" content="bookdown 0.12.2 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 13 Population-Level Estimation | The Book of OHDSI" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://ohdsi.github.io/TheBookOfOhdsi/" />
  <meta property="og:image" content="https://ohdsi.github.io/TheBookOfOhdsi/images/Cover/Cover.png" />
  <meta property="og:description" content="A book about the Observational Health Data Science and Informatics (OHDS). It described the OHDSI community, open standards and open source software." />
  <meta name="github-repo" content="OHDSI/TheBookOfOhdsi" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 13 Population-Level Estimation | The Book of OHDSI" />
  
  <meta name="twitter:description" content="A book about the Observational Health Data Science and Informatics (OHDS). It described the OHDSI community, open standards and open source software." />
  <meta name="twitter:image" content="https://ohdsi.github.io/TheBookOfOhdsi/images/Cover/Cover.png" />

<meta name="author" content="Observational Health Data Science and Informatics" />


<meta name="date" content="2019-08-16" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon" />
<link rel="prev" href="Characterization.html"/>
<link rel="next" href="PatientLevelPrediction.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-104086677-2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-104086677-2');
</script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">The Book of OHDSI</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#goals-of-this-book"><i class="fa fa-check"></i>Goals of this book</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#structure-of-the-book"><i class="fa fa-check"></i>Structure of the book</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#contributors"><i class="fa fa-check"></i>Contributors</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#software-versions"><i class="fa fa-check"></i>Software versions</a></li>
</ul></li>
<li class="part"><span><b>I The OHDSI Community</b></span></li>
<li class="chapter" data-level="1" data-path="MissionVisionValues.html"><a href="MissionVisionValues.html"><i class="fa fa-check"></i><b>1</b> Mission, vision, values</a><ul>
<li class="chapter" data-level="1.1" data-path="MissionVisionValues.html"><a href="MissionVisionValues.html#our-mission"><i class="fa fa-check"></i><b>1.1</b> Our Mission</a></li>
<li class="chapter" data-level="1.2" data-path="MissionVisionValues.html"><a href="MissionVisionValues.html#our-vision"><i class="fa fa-check"></i><b>1.2</b> Our Vision</a></li>
<li class="chapter" data-level="1.3" data-path="MissionVisionValues.html"><a href="MissionVisionValues.html#our-objectives"><i class="fa fa-check"></i><b>1.3</b> Our Objectives</a></li>
<li class="chapter" data-level="1.4" data-path="MissionVisionValues.html"><a href="MissionVisionValues.html#summary"><i class="fa fa-check"></i><b>1.4</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="Collaborators.html"><a href="Collaborators.html"><i class="fa fa-check"></i><b>2</b> Collaborators</a></li>
<li class="chapter" data-level="3" data-path="OpenScience.html"><a href="OpenScience.html"><i class="fa fa-check"></i><b>3</b> Open Science</a><ul>
<li class="chapter" data-level="3.1" data-path="OpenScience.html"><a href="OpenScience.html#open-science"><i class="fa fa-check"></i><b>3.1</b> Open Science</a></li>
<li class="chapter" data-level="3.2" data-path="OpenScience.html"><a href="OpenScience.html#open-science-in-action-the-study-a-thon"><i class="fa fa-check"></i><b>3.2</b> Open-Science in Action: the Study-a-thon</a></li>
<li class="chapter" data-level="3.3" data-path="OpenScience.html"><a href="OpenScience.html#open-standards"><i class="fa fa-check"></i><b>3.3</b> Open Standards</a></li>
<li class="chapter" data-level="3.4" data-path="OpenScience.html"><a href="OpenScience.html#open-source"><i class="fa fa-check"></i><b>3.4</b> Open Source</a></li>
<li class="chapter" data-level="3.5" data-path="OpenScience.html"><a href="OpenScience.html#open-data"><i class="fa fa-check"></i><b>3.5</b> Open Data</a></li>
<li class="chapter" data-level="3.6" data-path="OpenScience.html"><a href="OpenScience.html#open-discourse"><i class="fa fa-check"></i><b>3.6</b> Open Discourse</a></li>
<li class="chapter" data-level="3.7" data-path="OpenScience.html"><a href="OpenScience.html#ohdsi-and-the-fair-guiding-principles"><i class="fa fa-check"></i><b>3.7</b> OHDSI and the FAIR Guiding Principles</a><ul>
<li class="chapter" data-level="3.7.1" data-path="OpenScience.html"><a href="OpenScience.html#introduction"><i class="fa fa-check"></i><b>3.7.1</b> Introduction</a></li>
<li class="chapter" data-level="3.7.2" data-path="OpenScience.html"><a href="OpenScience.html#findability"><i class="fa fa-check"></i><b>3.7.2</b> Findability</a></li>
<li class="chapter" data-level="3.7.3" data-path="OpenScience.html"><a href="OpenScience.html#accessibility"><i class="fa fa-check"></i><b>3.7.3</b> Accessibility</a></li>
<li class="chapter" data-level="3.7.4" data-path="OpenScience.html"><a href="OpenScience.html#interoperability"><i class="fa fa-check"></i><b>3.7.4</b> Interoperability</a></li>
<li class="chapter" data-level="3.7.5" data-path="OpenScience.html"><a href="OpenScience.html#reusability"><i class="fa fa-check"></i><b>3.7.5</b> Reusability</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="OpenScience.html"><a href="OpenScience.html#conclusions"><i class="fa fa-check"></i><b>3.8</b> Conclusions</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="WhereToBegin.html"><a href="WhereToBegin.html"><i class="fa fa-check"></i><b>4</b> Where to begin</a><ul>
<li class="chapter" data-level="4.1" data-path="WhereToBegin.html"><a href="WhereToBegin.html#join-the-journey"><i class="fa fa-check"></i><b>4.1</b> Join the Journey</a><ul>
<li class="chapter" data-level="4.1.1" data-path="WhereToBegin.html"><a href="WhereToBegin.html#ohdsi-forum"><i class="fa fa-check"></i><b>4.1.1</b> OHDSI Forum</a></li>
<li class="chapter" data-level="4.1.2" data-path="WhereToBegin.html"><a href="WhereToBegin.html#ohdsi-educational-materials"><i class="fa fa-check"></i><b>4.1.2</b> OHDSI Educational Materials</a></li>
<li class="chapter" data-level="4.1.3" data-path="WhereToBegin.html"><a href="WhereToBegin.html#ohdsi-community-calls"><i class="fa fa-check"></i><b>4.1.3</b> OHDSI Community Calls</a></li>
<li class="chapter" data-level="4.1.4" data-path="WhereToBegin.html"><a href="WhereToBegin.html#ohdsi-workgroups"><i class="fa fa-check"></i><b>4.1.4</b> OHDSI Workgroups</a></li>
<li class="chapter" data-level="4.1.5" data-path="WhereToBegin.html"><a href="WhereToBegin.html#ohdsi-regional-chapters"><i class="fa fa-check"></i><b>4.1.5</b> OHDSI Regional Chapters</a></li>
<li class="chapter" data-level="4.1.6" data-path="WhereToBegin.html"><a href="WhereToBegin.html#ohdsi-research-network"><i class="fa fa-check"></i><b>4.1.6</b> OHDSI Research Network</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="WhereToBegin.html"><a href="WhereToBegin.html#where-you-fit-in"><i class="fa fa-check"></i><b>4.2</b> Where You Fit In</a></li>
<li class="chapter" data-level="4.3" data-path="WhereToBegin.html"><a href="WhereToBegin.html#summary-1"><i class="fa fa-check"></i><b>4.3</b> Summary</a></li>
</ul></li>
<li class="part"><span><b>II Uniform Data Representation</b></span></li>
<li class="chapter" data-level="5" data-path="CommonDataModel.html"><a href="CommonDataModel.html"><i class="fa fa-check"></i><b>5</b> The Common Data Model</a><ul>
<li class="chapter" data-level="5.1" data-path="CommonDataModel.html"><a href="CommonDataModel.html#design-principles"><i class="fa fa-check"></i><b>5.1</b> Design Principles</a></li>
<li class="chapter" data-level="5.2" data-path="CommonDataModel.html"><a href="CommonDataModel.html#data-model-conventions"><i class="fa fa-check"></i><b>5.2</b> Data Model Conventions</a><ul>
<li class="chapter" data-level="5.2.1" data-path="CommonDataModel.html"><a href="CommonDataModel.html#model-conv"><i class="fa fa-check"></i><b>5.2.1</b> General conventions of the model</a></li>
<li class="chapter" data-level="5.2.2" data-path="CommonDataModel.html"><a href="CommonDataModel.html#general-conventions-of-schemas"><i class="fa fa-check"></i><b>5.2.2</b> General conventions of schemas</a></li>
<li class="chapter" data-level="5.2.3" data-path="CommonDataModel.html"><a href="CommonDataModel.html#general-conventions-of-data-tables"><i class="fa fa-check"></i><b>5.2.3</b> General conventions of data tables</a></li>
<li class="chapter" data-level="5.2.4" data-path="CommonDataModel.html"><a href="CommonDataModel.html#general-conventions-of-domains"><i class="fa fa-check"></i><b>5.2.4</b> General conventions of Domains</a></li>
<li class="chapter" data-level="5.2.5" data-path="CommonDataModel.html"><a href="CommonDataModel.html#representation-of-content-through-concepts"><i class="fa fa-check"></i><b>5.2.5</b> Representation of content through Concepts</a></li>
<li class="chapter" data-level="5.2.6" data-path="CommonDataModel.html"><a href="CommonDataModel.html#general-naming-conventions-of-fields"><i class="fa fa-check"></i><b>5.2.6</b> General naming conventions of fields</a></li>
<li class="chapter" data-level="5.2.7" data-path="CommonDataModel.html"><a href="CommonDataModel.html#concepts-sources"><i class="fa fa-check"></i><b>5.2.7</b> Difference between Concepts and Source Values</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="CommonDataModel.html"><a href="CommonDataModel.html#omop-cdm-standardized-tables"><i class="fa fa-check"></i><b>5.3</b> OMOP CDM Standardized Tables</a><ul>
<li class="chapter" data-level="5.3.1" data-path="CommonDataModel.html"><a href="CommonDataModel.html#running-example-endometriosis"><i class="fa fa-check"></i><b>5.3.1</b> Running Example: Endometriosis</a></li>
<li class="chapter" data-level="5.3.2" data-path="CommonDataModel.html"><a href="CommonDataModel.html#person"><i class="fa fa-check"></i><b>5.3.2</b> PERSON table</a></li>
<li class="chapter" data-level="5.3.3" data-path="CommonDataModel.html"><a href="CommonDataModel.html#observationPeriod"><i class="fa fa-check"></i><b>5.3.3</b> OBSERVATION_PERIOD table</a></li>
<li class="chapter" data-level="5.3.4" data-path="CommonDataModel.html"><a href="CommonDataModel.html#visitOccurrence"><i class="fa fa-check"></i><b>5.3.4</b> VISIT_OCCURRENCE</a></li>
<li class="chapter" data-level="5.3.5" data-path="CommonDataModel.html"><a href="CommonDataModel.html#conditionOccurrence"><i class="fa fa-check"></i><b>5.3.5</b> CONDITION_OCCURRENCE</a></li>
<li class="chapter" data-level="5.3.6" data-path="CommonDataModel.html"><a href="CommonDataModel.html#drugExposure"><i class="fa fa-check"></i><b>5.3.6</b> DRUG_EXPOSURE</a></li>
<li class="chapter" data-level="5.3.7" data-path="CommonDataModel.html"><a href="CommonDataModel.html#procedureOccurrence"><i class="fa fa-check"></i><b>5.3.7</b> PROCEDURE_OCCURRENCE</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="CommonDataModel.html"><a href="CommonDataModel.html#additional-information"><i class="fa fa-check"></i><b>5.4</b> Additional Information</a></li>
<li class="chapter" data-level="5.5" data-path="CommonDataModel.html"><a href="CommonDataModel.html#summary-2"><i class="fa fa-check"></i><b>5.5</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="StandardizedVocabularies.html"><a href="StandardizedVocabularies.html"><i class="fa fa-check"></i><b>6</b> Standardized Vocabularies</a></li>
<li class="chapter" data-level="7" data-path="ExtractTransformLoad.html"><a href="ExtractTransformLoad.html"><i class="fa fa-check"></i><b>7</b> Extract Transform Load</a><ul>
<li class="chapter" data-level="7.1" data-path="ExtractTransformLoad.html"><a href="ExtractTransformLoad.html#introduction-1"><i class="fa fa-check"></i><b>7.1</b> Introduction</a></li>
<li class="chapter" data-level="7.2" data-path="ExtractTransformLoad.html"><a href="ExtractTransformLoad.html#step-1-design-the-etl"><i class="fa fa-check"></i><b>7.2</b> Step 1: Design the ETL</a><ul>
<li class="chapter" data-level="7.2.1" data-path="ExtractTransformLoad.html"><a href="ExtractTransformLoad.html#white-rabbit"><i class="fa fa-check"></i><b>7.2.1</b> White Rabbit</a></li>
<li class="chapter" data-level="7.2.2" data-path="ExtractTransformLoad.html"><a href="ExtractTransformLoad.html#rabbit-in-a-hat"><i class="fa fa-check"></i><b>7.2.2</b> Rabbit-In-a-Hat</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="ExtractTransformLoad.html"><a href="ExtractTransformLoad.html#step-2-create-the-code-mappings"><i class="fa fa-check"></i><b>7.3</b> Step 2: Create the code mappings</a><ul>
<li class="chapter" data-level="7.3.1" data-path="ExtractTransformLoad.html"><a href="ExtractTransformLoad.html#usagi"><i class="fa fa-check"></i><b>7.3.1</b> Usagi</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="ExtractTransformLoad.html"><a href="ExtractTransformLoad.html#step-3-implement-the-etl"><i class="fa fa-check"></i><b>7.4</b> Step 3: Implement the ETL</a></li>
<li class="chapter" data-level="7.5" data-path="ExtractTransformLoad.html"><a href="ExtractTransformLoad.html#step-4-quality-control"><i class="fa fa-check"></i><b>7.5</b> Step 4: Quality control</a></li>
<li class="chapter" data-level="7.6" data-path="ExtractTransformLoad.html"><a href="ExtractTransformLoad.html#final-thoughts-on-etl"><i class="fa fa-check"></i><b>7.6</b> Final thoughts on ETL</a></li>
<li class="chapter" data-level="7.7" data-path="ExtractTransformLoad.html"><a href="ExtractTransformLoad.html#summary-3"><i class="fa fa-check"></i><b>7.7</b> Summary</a></li>
</ul></li>
<li class="part"><span><b>III Data Analytics</b></span></li>
<li class="chapter" data-level="8" data-path="DataAnalyticsUseCases.html"><a href="DataAnalyticsUseCases.html"><i class="fa fa-check"></i><b>8</b> Data Analytics Use Cases</a><ul>
<li class="chapter" data-level="8.1" data-path="DataAnalyticsUseCases.html"><a href="DataAnalyticsUseCases.html#characterization"><i class="fa fa-check"></i><b>8.1</b> Characterization</a></li>
<li class="chapter" data-level="8.2" data-path="DataAnalyticsUseCases.html"><a href="DataAnalyticsUseCases.html#population-level-estimation"><i class="fa fa-check"></i><b>8.2</b> Population-level estimation</a></li>
<li class="chapter" data-level="8.3" data-path="DataAnalyticsUseCases.html"><a href="DataAnalyticsUseCases.html#patient-level-prediction"><i class="fa fa-check"></i><b>8.3</b> Patient-Level prediction</a></li>
<li class="chapter" data-level="8.4" data-path="DataAnalyticsUseCases.html"><a href="DataAnalyticsUseCases.html#a-typical-application"><i class="fa fa-check"></i><b>8.4</b> A Typical Application</a><ul>
<li class="chapter" data-level="8.4.1" data-path="DataAnalyticsUseCases.html"><a href="DataAnalyticsUseCases.html#characterization-questions"><i class="fa fa-check"></i><b>8.4.1</b> Characterization Questions</a></li>
<li class="chapter" data-level="8.4.2" data-path="DataAnalyticsUseCases.html"><a href="DataAnalyticsUseCases.html#population-level-estimation-question"><i class="fa fa-check"></i><b>8.4.2</b> Population-Level Estimation Question</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="DataAnalyticsUseCases.html"><a href="DataAnalyticsUseCases.html#limitations-of-observational-research"><i class="fa fa-check"></i><b>8.5</b> Limitations of observational research</a><ul>
<li class="chapter" data-level="8.5.1" data-path="DataAnalyticsUseCases.html"><a href="DataAnalyticsUseCases.html#erroneous-data"><i class="fa fa-check"></i><b>8.5.1</b> Erroneous data</a></li>
<li class="chapter" data-level="8.5.2" data-path="DataAnalyticsUseCases.html"><a href="DataAnalyticsUseCases.html#missing-data"><i class="fa fa-check"></i><b>8.5.2</b> Missing data</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="DataAnalyticsUseCases.html"><a href="DataAnalyticsUseCases.html#summary-4"><i class="fa fa-check"></i><b>8.6</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="OhdsiAnalyticsTools.html"><a href="OhdsiAnalyticsTools.html"><i class="fa fa-check"></i><b>9</b> OHDSI Analytics Tools</a><ul>
<li class="chapter" data-level="9.1" data-path="OhdsiAnalyticsTools.html"><a href="OhdsiAnalyticsTools.html#analysisImplementation"><i class="fa fa-check"></i><b>9.1</b> Analysis implementation</a></li>
<li class="chapter" data-level="9.2" data-path="OhdsiAnalyticsTools.html"><a href="OhdsiAnalyticsTools.html#analysis-strategy"><i class="fa fa-check"></i><b>9.2</b> Analysis strategy</a></li>
<li class="chapter" data-level="9.3" data-path="OhdsiAnalyticsTools.html"><a href="OhdsiAnalyticsTools.html#atlas"><i class="fa fa-check"></i><b>9.3</b> ATLAS</a><ul>
<li class="chapter" data-level="9.3.1" data-path="OhdsiAnalyticsTools.html"><a href="OhdsiAnalyticsTools.html#security"><i class="fa fa-check"></i><b>9.3.1</b> Security</a></li>
<li class="chapter" data-level="9.3.2" data-path="OhdsiAnalyticsTools.html"><a href="OhdsiAnalyticsTools.html#documentation"><i class="fa fa-check"></i><b>9.3.2</b> Documentation</a></li>
<li class="chapter" data-level="9.3.3" data-path="OhdsiAnalyticsTools.html"><a href="OhdsiAnalyticsTools.html#how-to-install"><i class="fa fa-check"></i><b>9.3.3</b> How to install</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="OhdsiAnalyticsTools.html"><a href="OhdsiAnalyticsTools.html#methods-library"><i class="fa fa-check"></i><b>9.4</b> Methods Library</a><ul>
<li class="chapter" data-level="9.4.1" data-path="OhdsiAnalyticsTools.html"><a href="OhdsiAnalyticsTools.html#support-for-large-scale-analytics"><i class="fa fa-check"></i><b>9.4.1</b> Support for large-scale analytics</a></li>
<li class="chapter" data-level="9.4.2" data-path="OhdsiAnalyticsTools.html"><a href="OhdsiAnalyticsTools.html#BigDataSupport"><i class="fa fa-check"></i><b>9.4.2</b> Support for big data</a></li>
<li class="chapter" data-level="9.4.3" data-path="OhdsiAnalyticsTools.html"><a href="OhdsiAnalyticsTools.html#documentation-1"><i class="fa fa-check"></i><b>9.4.3</b> Documentation</a></li>
<li class="chapter" data-level="9.4.4" data-path="OhdsiAnalyticsTools.html"><a href="OhdsiAnalyticsTools.html#system-requirements"><i class="fa fa-check"></i><b>9.4.4</b> System requirements</a></li>
<li class="chapter" data-level="9.4.5" data-path="OhdsiAnalyticsTools.html"><a href="OhdsiAnalyticsTools.html#installR"><i class="fa fa-check"></i><b>9.4.5</b> How to install</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="OhdsiAnalyticsTools.html"><a href="OhdsiAnalyticsTools.html#deployment-strategies"><i class="fa fa-check"></i><b>9.5</b> Deployment strategies</a><ul>
<li class="chapter" data-level="9.5.1" data-path="OhdsiAnalyticsTools.html"><a href="OhdsiAnalyticsTools.html#broadsea"><i class="fa fa-check"></i><b>9.5.1</b> Broadsea</a></li>
<li class="chapter" data-level="9.5.2" data-path="OhdsiAnalyticsTools.html"><a href="OhdsiAnalyticsTools.html#amazon-aws"><i class="fa fa-check"></i><b>9.5.2</b> Amazon AWS</a></li>
</ul></li>
<li class="chapter" data-level="9.6" data-path="OhdsiAnalyticsTools.html"><a href="OhdsiAnalyticsTools.html#summary-5"><i class="fa fa-check"></i><b>9.6</b> Summary</a></li>
<li class="chapter" data-level="9.7" data-path="OhdsiAnalyticsTools.html"><a href="OhdsiAnalyticsTools.html#exercises"><i class="fa fa-check"></i><b>9.7</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="SqlAndR.html"><a href="SqlAndR.html"><i class="fa fa-check"></i><b>10</b> SQL and R</a><ul>
<li class="chapter" data-level="10.1" data-path="SqlAndR.html"><a href="SqlAndR.html#SqlRender"><i class="fa fa-check"></i><b>10.1</b> SqlRender</a><ul>
<li class="chapter" data-level="10.1.1" data-path="SqlAndR.html"><a href="SqlAndR.html#sql-parameterization"><i class="fa fa-check"></i><b>10.1.1</b> SQL parameterization</a></li>
<li class="chapter" data-level="10.1.2" data-path="SqlAndR.html"><a href="SqlAndR.html#translation-to-other-sql-dialects"><i class="fa fa-check"></i><b>10.1.2</b> Translation to other SQL dialects</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="SqlAndR.html"><a href="SqlAndR.html#DatabaseConnector"><i class="fa fa-check"></i><b>10.2</b> DatabaseConnector</a><ul>
<li class="chapter" data-level="10.2.1" data-path="SqlAndR.html"><a href="SqlAndR.html#creating-a-connection"><i class="fa fa-check"></i><b>10.2.1</b> Creating a connection</a></li>
<li class="chapter" data-level="10.2.2" data-path="SqlAndR.html"><a href="SqlAndR.html#querying"><i class="fa fa-check"></i><b>10.2.2</b> Querying</a></li>
<li class="chapter" data-level="10.2.3" data-path="SqlAndR.html"><a href="SqlAndR.html#querying-using-ffdf-objects"><i class="fa fa-check"></i><b>10.2.3</b> Querying using ffdf objects</a></li>
<li class="chapter" data-level="10.2.4" data-path="SqlAndR.html"><a href="SqlAndR.html#querying-different-platforms-using-the-same-sql"><i class="fa fa-check"></i><b>10.2.4</b> Querying different platforms using the same SQL</a></li>
<li class="chapter" data-level="10.2.5" data-path="SqlAndR.html"><a href="SqlAndR.html#inserting-tables"><i class="fa fa-check"></i><b>10.2.5</b> Inserting tables</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="SqlAndR.html"><a href="SqlAndR.html#QueryTheCdm"><i class="fa fa-check"></i><b>10.3</b> Querying the CDM</a></li>
<li class="chapter" data-level="10.4" data-path="SqlAndR.html"><a href="SqlAndR.html#using-the-vocabulary-when-querying"><i class="fa fa-check"></i><b>10.4</b> Using the vocabulary when querying</a></li>
<li class="chapter" data-level="10.5" data-path="SqlAndR.html"><a href="SqlAndR.html#querylibrary"><i class="fa fa-check"></i><b>10.5</b> QueryLibrary</a></li>
<li class="chapter" data-level="10.6" data-path="SqlAndR.html"><a href="SqlAndR.html#designing-a-simple-study"><i class="fa fa-check"></i><b>10.6</b> Designing a simple study</a><ul>
<li class="chapter" data-level="10.6.1" data-path="SqlAndR.html"><a href="SqlAndR.html#problem-definition"><i class="fa fa-check"></i><b>10.6.1</b> Problem definition</a></li>
<li class="chapter" data-level="10.6.2" data-path="SqlAndR.html"><a href="SqlAndR.html#exposure"><i class="fa fa-check"></i><b>10.6.2</b> Exposure</a></li>
<li class="chapter" data-level="10.6.3" data-path="SqlAndR.html"><a href="SqlAndR.html#outcome"><i class="fa fa-check"></i><b>10.6.3</b> Outcome</a></li>
<li class="chapter" data-level="10.6.4" data-path="SqlAndR.html"><a href="SqlAndR.html#time-at-risk"><i class="fa fa-check"></i><b>10.6.4</b> Time-at-risk</a></li>
</ul></li>
<li class="chapter" data-level="10.7" data-path="SqlAndR.html"><a href="SqlAndR.html#implementing-the-study-using-sql-and-r"><i class="fa fa-check"></i><b>10.7</b> Implementing the study using SQL and R</a><ul>
<li class="chapter" data-level="10.7.1" data-path="SqlAndR.html"><a href="SqlAndR.html#exposure-cohort"><i class="fa fa-check"></i><b>10.7.1</b> Exposure cohort</a></li>
<li class="chapter" data-level="10.7.2" data-path="SqlAndR.html"><a href="SqlAndR.html#outcome-cohort"><i class="fa fa-check"></i><b>10.7.2</b> Outcome cohort</a></li>
<li class="chapter" data-level="10.7.3" data-path="SqlAndR.html"><a href="SqlAndR.html#incidence-rate-calculation"><i class="fa fa-check"></i><b>10.7.3</b> Incidence rate calculation</a></li>
<li class="chapter" data-level="10.7.4" data-path="SqlAndR.html"><a href="SqlAndR.html#clean-up"><i class="fa fa-check"></i><b>10.7.4</b> Clean up</a></li>
<li class="chapter" data-level="10.7.5" data-path="SqlAndR.html"><a href="SqlAndR.html#compatibility"><i class="fa fa-check"></i><b>10.7.5</b> Compatibility</a></li>
</ul></li>
<li class="chapter" data-level="10.8" data-path="SqlAndR.html"><a href="SqlAndR.html#summary-6"><i class="fa fa-check"></i><b>10.8</b> Summary</a></li>
<li class="chapter" data-level="10.9" data-path="SqlAndR.html"><a href="SqlAndR.html#exercises-1"><i class="fa fa-check"></i><b>10.9</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="Cohorts.html"><a href="Cohorts.html"><i class="fa fa-check"></i><b>11</b> Defining cohorts</a><ul>
<li class="chapter" data-level="11.1" data-path="Cohorts.html"><a href="Cohorts.html#cohort-definitions"><i class="fa fa-check"></i><b>11.1</b> Cohort definitions</a><ul>
<li class="chapter" data-level="11.1.1" data-path="Cohorts.html"><a href="Cohorts.html#rule-based-cohort-definitions"><i class="fa fa-check"></i><b>11.1.1</b> Rule-based cohort definitions</a></li>
<li class="chapter" data-level="11.1.2" data-path="Cohorts.html"><a href="Cohorts.html#probabilistic-cohort-definitions"><i class="fa fa-check"></i><b>11.1.2</b> Probabilistic cohort definitions</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="Cohorts.html"><a href="Cohorts.html#cohort-definition-validity"><i class="fa fa-check"></i><b>11.2</b> Cohort definition validity</a></li>
<li class="chapter" data-level="11.3" data-path="Cohorts.html"><a href="Cohorts.html#ohdsi-gold-standard-phenotype-library"><i class="fa fa-check"></i><b>11.3</b> OHDSI Gold Standard Phenotype Library</a></li>
<li class="chapter" data-level="11.4" data-path="Cohorts.html"><a href="Cohorts.html#defining-a-cohort-for-hypertension"><i class="fa fa-check"></i><b>11.4</b> Defining a cohort for hypertension</a><ul>
<li class="chapter" data-level="11.4.1" data-path="Cohorts.html"><a href="Cohorts.html#implementing-a-cohort-using-atlas"><i class="fa fa-check"></i><b>11.4.1</b> Implementing a Cohort using ATLAS</a></li>
</ul></li>
<li class="chapter" data-level="11.5" data-path="Cohorts.html"><a href="Cohorts.html#implementing-the-cohort-using-sql"><i class="fa fa-check"></i><b>11.5</b> Implementing the cohort using SQL</a><ul>
<li class="chapter" data-level="11.5.1" data-path="Cohorts.html"><a href="Cohorts.html#connecting-to-the-database"><i class="fa fa-check"></i><b>11.5.1</b> Connecting to the database</a></li>
<li class="chapter" data-level="11.5.2" data-path="Cohorts.html"><a href="Cohorts.html#specifying-the-concepts"><i class="fa fa-check"></i><b>11.5.2</b> Specifying the concepts</a></li>
<li class="chapter" data-level="11.5.3" data-path="Cohorts.html"><a href="Cohorts.html#finding-first-use"><i class="fa fa-check"></i><b>11.5.3</b> Finding first use</a></li>
<li class="chapter" data-level="11.5.4" data-path="Cohorts.html"><a href="Cohorts.html#require-365-days-of-prior-observation"><i class="fa fa-check"></i><b>11.5.4</b> Require 365 days of prior observation</a></li>
<li class="chapter" data-level="11.5.5" data-path="Cohorts.html"><a href="Cohorts.html#require-prior-hypertension"><i class="fa fa-check"></i><b>11.5.5</b> Require prior hypertension</a></li>
<li class="chapter" data-level="11.5.6" data-path="Cohorts.html"><a href="Cohorts.html#no-prior-treatment"><i class="fa fa-check"></i><b>11.5.6</b> No prior treatment</a></li>
<li class="chapter" data-level="11.5.7" data-path="Cohorts.html"><a href="Cohorts.html#monotherapy"><i class="fa fa-check"></i><b>11.5.7</b> Monotherapy</a></li>
<li class="chapter" data-level="11.5.8" data-path="Cohorts.html"><a href="Cohorts.html#cohort-exit"><i class="fa fa-check"></i><b>11.5.8</b> Cohort exit</a></li>
<li class="chapter" data-level="11.5.9" data-path="Cohorts.html"><a href="Cohorts.html#cleanup"><i class="fa fa-check"></i><b>11.5.9</b> Cleanup</a></li>
</ul></li>
<li class="chapter" data-level="11.6" data-path="Cohorts.html"><a href="Cohorts.html#summary-7"><i class="fa fa-check"></i><b>11.6</b> Summary</a><ul>
<li class="chapter" data-level="11.6.1" data-path="Cohorts.html"><a href="Cohorts.html#exercises-2"><i class="fa fa-check"></i><b>11.6.1</b> Exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="Characterization.html"><a href="Characterization.html"><i class="fa fa-check"></i><b>12</b> Characterization</a><ul>
<li class="chapter" data-level="12.1" data-path="Characterization.html"><a href="Characterization.html#database-level-characterization"><i class="fa fa-check"></i><b>12.1</b> Database Level Characterization</a></li>
<li class="chapter" data-level="12.2" data-path="Characterization.html"><a href="Characterization.html#cohort-characterization"><i class="fa fa-check"></i><b>12.2</b> Cohort characterization</a></li>
<li class="chapter" data-level="12.3" data-path="Characterization.html"><a href="Characterization.html#treatment-pathways"><i class="fa fa-check"></i><b>12.3</b> Treatment Pathways</a></li>
<li class="chapter" data-level="12.4" data-path="Characterization.html"><a href="Characterization.html#incidence"><i class="fa fa-check"></i><b>12.4</b> Incidence</a></li>
<li class="chapter" data-level="12.5" data-path="Characterization.html"><a href="Characterization.html#characterizing-hypertensive-persons"><i class="fa fa-check"></i><b>12.5</b> Characterizing hypertensive persons</a></li>
<li class="chapter" data-level="12.6" data-path="Characterization.html"><a href="Characterization.html#database-characterization-in-atlas"><i class="fa fa-check"></i><b>12.6</b> Database characterization in ATLAS</a></li>
<li class="chapter" data-level="12.7" data-path="Characterization.html"><a href="Characterization.html#cohort-characterization-in-atlas"><i class="fa fa-check"></i><b>12.7</b> Cohort characterization in ATLAS</a><ul>
<li class="chapter" data-level="12.7.1" data-path="Characterization.html"><a href="Characterization.html#design"><i class="fa fa-check"></i><b>12.7.1</b> Design</a></li>
<li class="chapter" data-level="12.7.2" data-path="Characterization.html"><a href="Characterization.html#executions"><i class="fa fa-check"></i><b>12.7.2</b> Executions</a></li>
<li class="chapter" data-level="12.7.3" data-path="Characterization.html"><a href="Characterization.html#results"><i class="fa fa-check"></i><b>12.7.3</b> Results</a></li>
<li class="chapter" data-level="12.7.4" data-path="Characterization.html"><a href="Characterization.html#defining-custom-features"><i class="fa fa-check"></i><b>12.7.4</b> Defining custom features</a></li>
</ul></li>
<li class="chapter" data-level="12.8" data-path="Characterization.html"><a href="Characterization.html#cohort-characterization-in-r"><i class="fa fa-check"></i><b>12.8</b> Cohort characterization in R</a><ul>
<li class="chapter" data-level="12.8.1" data-path="Characterization.html"><a href="Characterization.html#cohort-instantiation"><i class="fa fa-check"></i><b>12.8.1</b> Cohort instantiation</a></li>
<li class="chapter" data-level="12.8.2" data-path="Characterization.html"><a href="Characterization.html#data-extraction"><i class="fa fa-check"></i><b>12.8.2</b> Data extraction</a></li>
<li class="chapter" data-level="12.8.3" data-path="Characterization.html"><a href="Characterization.html#using-prespecified-analyses"><i class="fa fa-check"></i><b>12.8.3</b> Using prespecified analyses</a></li>
<li class="chapter" data-level="12.8.4" data-path="Characterization.html"><a href="Characterization.html#creating-aggregated-covariates"><i class="fa fa-check"></i><b>12.8.4</b> Creating aggregated covariates</a></li>
<li class="chapter" data-level="12.8.5" data-path="Characterization.html"><a href="Characterization.html#output-format"><i class="fa fa-check"></i><b>12.8.5</b> Output format</a></li>
<li class="chapter" data-level="12.8.6" data-path="Characterization.html"><a href="Characterization.html#custom-covariates"><i class="fa fa-check"></i><b>12.8.6</b> Custom covariates</a></li>
</ul></li>
<li class="chapter" data-level="12.9" data-path="Characterization.html"><a href="Characterization.html#cohort-pathways-in-atlas"><i class="fa fa-check"></i><b>12.9</b> Cohort pathways in ATLAS</a><ul>
<li class="chapter" data-level="12.9.1" data-path="Characterization.html"><a href="Characterization.html#design-1"><i class="fa fa-check"></i><b>12.9.1</b> Design</a></li>
<li class="chapter" data-level="12.9.2" data-path="Characterization.html"><a href="Characterization.html#executions-1"><i class="fa fa-check"></i><b>12.9.2</b> Executions</a></li>
<li class="chapter" data-level="12.9.3" data-path="Characterization.html"><a href="Characterization.html#viewing-results"><i class="fa fa-check"></i><b>12.9.3</b> Viewing Results</a></li>
</ul></li>
<li class="chapter" data-level="12.10" data-path="Characterization.html"><a href="Characterization.html#incidence-analysis-in-atlas"><i class="fa fa-check"></i><b>12.10</b> Incidence analysis in ATLAS</a><ul>
<li class="chapter" data-level="12.10.1" data-path="Characterization.html"><a href="Characterization.html#design-2"><i class="fa fa-check"></i><b>12.10.1</b> Design</a></li>
<li class="chapter" data-level="12.10.2" data-path="Characterization.html"><a href="Characterization.html#executions-2"><i class="fa fa-check"></i><b>12.10.2</b> Executions</a></li>
<li class="chapter" data-level="12.10.3" data-path="Characterization.html"><a href="Characterization.html#viewing-results-1"><i class="fa fa-check"></i><b>12.10.3</b> Viewing Results</a></li>
</ul></li>
<li class="chapter" data-level="12.11" data-path="Characterization.html"><a href="Characterization.html#summary-8"><i class="fa fa-check"></i><b>12.11</b> Summary</a></li>
<li class="chapter" data-level="12.12" data-path="Characterization.html"><a href="Characterization.html#exercises-3"><i class="fa fa-check"></i><b>12.12</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="PopulationLevelEstimation.html"><a href="PopulationLevelEstimation.html"><i class="fa fa-check"></i><b>13</b> Population-Level Estimation</a><ul>
<li class="chapter" data-level="13.1" data-path="PopulationLevelEstimation.html"><a href="PopulationLevelEstimation.html#CohortMethod"><i class="fa fa-check"></i><b>13.1</b> The cohort method design</a><ul>
<li class="chapter" data-level="13.1.1" data-path="PopulationLevelEstimation.html"><a href="PopulationLevelEstimation.html#propensity-scores"><i class="fa fa-check"></i><b>13.1.1</b> Propensity scores</a></li>
<li class="chapter" data-level="13.1.2" data-path="PopulationLevelEstimation.html"><a href="PopulationLevelEstimation.html#VariableSelection"><i class="fa fa-check"></i><b>13.1.2</b> Variable selection</a></li>
<li class="chapter" data-level="13.1.3" data-path="PopulationLevelEstimation.html"><a href="PopulationLevelEstimation.html#caliper"><i class="fa fa-check"></i><b>13.1.3</b> Caliper</a></li>
<li class="chapter" data-level="13.1.4" data-path="PopulationLevelEstimation.html"><a href="PopulationLevelEstimation.html#overlap-preference-scores"><i class="fa fa-check"></i><b>13.1.4</b> Overlap: preference scores</a></li>
<li class="chapter" data-level="13.1.5" data-path="PopulationLevelEstimation.html"><a href="PopulationLevelEstimation.html#balance"><i class="fa fa-check"></i><b>13.1.5</b> Balance</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="PopulationLevelEstimation.html"><a href="PopulationLevelEstimation.html#the-self-controlled-cohort-design"><i class="fa fa-check"></i><b>13.2</b> The self-controlled cohort design</a></li>
<li class="chapter" data-level="13.3" data-path="PopulationLevelEstimation.html"><a href="PopulationLevelEstimation.html#the-case-control-design"><i class="fa fa-check"></i><b>13.3</b> The case-control design</a></li>
<li class="chapter" data-level="13.4" data-path="PopulationLevelEstimation.html"><a href="PopulationLevelEstimation.html#the-case-crossover-design"><i class="fa fa-check"></i><b>13.4</b> The case-crossover design</a></li>
<li class="chapter" data-level="13.5" data-path="PopulationLevelEstimation.html"><a href="PopulationLevelEstimation.html#the-self-controlled-case-series-design"><i class="fa fa-check"></i><b>13.5</b> The self-controlled case series design</a></li>
<li class="chapter" data-level="13.6" data-path="PopulationLevelEstimation.html"><a href="PopulationLevelEstimation.html#designing-a-hypertension-study"><i class="fa fa-check"></i><b>13.6</b> Designing a hypertension study</a><ul>
<li class="chapter" data-level="13.6.1" data-path="PopulationLevelEstimation.html"><a href="PopulationLevelEstimation.html#problem-definition-1"><i class="fa fa-check"></i><b>13.6.1</b> Problem definition</a></li>
<li class="chapter" data-level="13.6.2" data-path="PopulationLevelEstimation.html"><a href="PopulationLevelEstimation.html#target-and-comparator"><i class="fa fa-check"></i><b>13.6.2</b> Target and comparator</a></li>
<li class="chapter" data-level="13.6.3" data-path="PopulationLevelEstimation.html"><a href="PopulationLevelEstimation.html#outcome-1"><i class="fa fa-check"></i><b>13.6.3</b> Outcome</a></li>
<li class="chapter" data-level="13.6.4" data-path="PopulationLevelEstimation.html"><a href="PopulationLevelEstimation.html#time-at-risk-1"><i class="fa fa-check"></i><b>13.6.4</b> Time-at-risk</a></li>
<li class="chapter" data-level="13.6.5" data-path="PopulationLevelEstimation.html"><a href="PopulationLevelEstimation.html#model"><i class="fa fa-check"></i><b>13.6.5</b> Model</a></li>
<li class="chapter" data-level="13.6.6" data-path="PopulationLevelEstimation.html"><a href="PopulationLevelEstimation.html#study-summary"><i class="fa fa-check"></i><b>13.6.6</b> Study summary</a></li>
<li class="chapter" data-level="13.6.7" data-path="PopulationLevelEstimation.html"><a href="PopulationLevelEstimation.html#control-questions"><i class="fa fa-check"></i><b>13.6.7</b> Control questions</a></li>
</ul></li>
<li class="chapter" data-level="13.7" data-path="PopulationLevelEstimation.html"><a href="PopulationLevelEstimation.html#PleAtlas"><i class="fa fa-check"></i><b>13.7</b> Implementing the study using ATLAS</a><ul>
<li class="chapter" data-level="13.7.1" data-path="PopulationLevelEstimation.html"><a href="PopulationLevelEstimation.html#ComparisonSettings"><i class="fa fa-check"></i><b>13.7.1</b> Comparative cohort settings</a></li>
<li class="chapter" data-level="13.7.2" data-path="PopulationLevelEstimation.html"><a href="PopulationLevelEstimation.html#effect-estimation-analysis-settings"><i class="fa fa-check"></i><b>13.7.2</b> Effect estimation analysis settings</a></li>
<li class="chapter" data-level="13.7.3" data-path="PopulationLevelEstimation.html"><a href="PopulationLevelEstimation.html#evaluationSettings"><i class="fa fa-check"></i><b>13.7.3</b> Evaluation settings</a></li>
<li class="chapter" data-level="13.7.4" data-path="PopulationLevelEstimation.html"><a href="PopulationLevelEstimation.html#running-the-study-package"><i class="fa fa-check"></i><b>13.7.4</b> Running the study package</a></li>
</ul></li>
<li class="chapter" data-level="13.8" data-path="PopulationLevelEstimation.html"><a href="PopulationLevelEstimation.html#pleR"><i class="fa fa-check"></i><b>13.8</b> Implementing the study using R</a><ul>
<li class="chapter" data-level="13.8.1" data-path="PopulationLevelEstimation.html"><a href="PopulationLevelEstimation.html#cohort-instantiation-1"><i class="fa fa-check"></i><b>13.8.1</b> Cohort instantiation</a></li>
<li class="chapter" data-level="13.8.2" data-path="PopulationLevelEstimation.html"><a href="PopulationLevelEstimation.html#data-extraction-1"><i class="fa fa-check"></i><b>13.8.2</b> Data extraction</a></li>
<li class="chapter" data-level="13.8.3" data-path="PopulationLevelEstimation.html"><a href="PopulationLevelEstimation.html#defining-the-study-population"><i class="fa fa-check"></i><b>13.8.3</b> Defining the study population</a></li>
<li class="chapter" data-level="13.8.4" data-path="PopulationLevelEstimation.html"><a href="PopulationLevelEstimation.html#propensity-scores-1"><i class="fa fa-check"></i><b>13.8.4</b> Propensity scores</a></li>
<li class="chapter" data-level="13.8.5" data-path="PopulationLevelEstimation.html"><a href="PopulationLevelEstimation.html#outcome-models"><i class="fa fa-check"></i><b>13.8.5</b> Outcome models</a></li>
<li class="chapter" data-level="13.8.6" data-path="PopulationLevelEstimation.html"><a href="PopulationLevelEstimation.html#MultipleAnalyses"><i class="fa fa-check"></i><b>13.8.6</b> Running multiple analyses</a></li>
</ul></li>
<li class="chapter" data-level="13.9" data-path="PopulationLevelEstimation.html"><a href="PopulationLevelEstimation.html#studyOutputs"><i class="fa fa-check"></i><b>13.9</b> Study outputs</a><ul>
<li class="chapter" data-level="13.9.1" data-path="PopulationLevelEstimation.html"><a href="PopulationLevelEstimation.html#propensity-scores-and-model"><i class="fa fa-check"></i><b>13.9.1</b> Propensity scores and model</a></li>
<li class="chapter" data-level="13.9.2" data-path="PopulationLevelEstimation.html"><a href="PopulationLevelEstimation.html#covariate-balance"><i class="fa fa-check"></i><b>13.9.2</b> Covariate balance</a></li>
<li class="chapter" data-level="13.9.3" data-path="PopulationLevelEstimation.html"><a href="PopulationLevelEstimation.html#follow-up-and-power"><i class="fa fa-check"></i><b>13.9.3</b> Follow up and power</a></li>
<li class="chapter" data-level="13.9.4" data-path="PopulationLevelEstimation.html"><a href="PopulationLevelEstimation.html#kaplan-meier"><i class="fa fa-check"></i><b>13.9.4</b> Kaplan-Meier</a></li>
<li class="chapter" data-level="13.9.5" data-path="PopulationLevelEstimation.html"><a href="PopulationLevelEstimation.html#effect-size-estimate"><i class="fa fa-check"></i><b>13.9.5</b> Effect size estimate</a></li>
</ul></li>
<li class="chapter" data-level="13.10" data-path="PopulationLevelEstimation.html"><a href="PopulationLevelEstimation.html#summary-9"><i class="fa fa-check"></i><b>13.10</b> Summary</a></li>
<li class="chapter" data-level="13.11" data-path="PopulationLevelEstimation.html"><a href="PopulationLevelEstimation.html#excercises"><i class="fa fa-check"></i><b>13.11</b> Excercises</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html"><i class="fa fa-check"></i><b>14</b> Patient Level Prediction</a><ul>
<li class="chapter" data-level="14.1" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#the-prediction-problem"><i class="fa fa-check"></i><b>14.1</b> The prediction problem</a></li>
<li class="chapter" data-level="14.2" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#data-extraction-2"><i class="fa fa-check"></i><b>14.2</b> Data extraction</a><ul>
<li class="chapter" data-level="14.2.1" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#data-extraction-example"><i class="fa fa-check"></i><b>14.2.1</b> Data extraction example</a></li>
<li class="chapter" data-level="14.2.2" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#missingness"><i class="fa fa-check"></i><b>14.2.2</b> Missingness</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#modelFitting"><i class="fa fa-check"></i><b>14.3</b> Fitting the model</a><ul>
<li class="chapter" data-level="14.3.1" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#regularized-logistic-regression"><i class="fa fa-check"></i><b>14.3.1</b> Regularized logistic regression</a></li>
<li class="chapter" data-level="14.3.2" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#gradient-boosting-machines"><i class="fa fa-check"></i><b>14.3.2</b> Gradient boosting machines</a></li>
<li class="chapter" data-level="14.3.3" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#random-forest"><i class="fa fa-check"></i><b>14.3.3</b> Random forest</a></li>
<li class="chapter" data-level="14.3.4" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#k-nearest-neighbors"><i class="fa fa-check"></i><b>14.3.4</b> K-nearest neighbors</a></li>
<li class="chapter" data-level="14.3.5" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#naive-bayes"><i class="fa fa-check"></i><b>14.3.5</b> Naive Bayes</a></li>
<li class="chapter" data-level="14.3.6" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#adaboost"><i class="fa fa-check"></i><b>14.3.6</b> AdaBoost</a></li>
<li class="chapter" data-level="14.3.7" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#decision-tree"><i class="fa fa-check"></i><b>14.3.7</b> Decision Tree</a></li>
<li class="chapter" data-level="14.3.8" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#multilayer-perceptron"><i class="fa fa-check"></i><b>14.3.8</b> Multilayer Perceptron</a></li>
<li class="chapter" data-level="14.3.9" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#deep-learning"><i class="fa fa-check"></i><b>14.3.9</b> Deep Learning</a></li>
<li class="chapter" data-level="14.3.10" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#other-algorithms"><i class="fa fa-check"></i><b>14.3.10</b> Other algorithms</a></li>
</ul></li>
<li class="chapter" data-level="14.4" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#evaluating-prediction-models"><i class="fa fa-check"></i><b>14.4</b> Evaluating prediction models</a><ul>
<li class="chapter" data-level="14.4.1" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#evaluation-types"><i class="fa fa-check"></i><b>14.4.1</b> Evaluation Types</a></li>
<li class="chapter" data-level="14.4.2" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#performance"><i class="fa fa-check"></i><b>14.4.2</b> Performance Metrics</a></li>
</ul></li>
<li class="chapter" data-level="14.5" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#designing-a-patient-level-prediction-study"><i class="fa fa-check"></i><b>14.5</b> Designing a patient-level prediction Study</a><ul>
<li class="chapter" data-level="14.5.1" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#problem-definition-2"><i class="fa fa-check"></i><b>14.5.1</b> Problem definition</a></li>
<li class="chapter" data-level="14.5.2" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#study-population-definition"><i class="fa fa-check"></i><b>14.5.2</b> Study population definition</a></li>
<li class="chapter" data-level="14.5.3" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#model-development-settings"><i class="fa fa-check"></i><b>14.5.3</b> Model development settings</a></li>
<li class="chapter" data-level="14.5.4" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#model-evaluation"><i class="fa fa-check"></i><b>14.5.4</b> Model evaluation</a></li>
<li class="chapter" data-level="14.5.5" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#study-summary-1"><i class="fa fa-check"></i><b>14.5.5</b> Study summary</a></li>
</ul></li>
<li class="chapter" data-level="14.6" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#implementing-the-study-in-atlas"><i class="fa fa-check"></i><b>14.6</b> Implementing the study in ATLAS</a><ul>
<li class="chapter" data-level="14.6.1" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#prediction-problem-settings"><i class="fa fa-check"></i><b>14.6.1</b> Prediction Problem Settings</a></li>
<li class="chapter" data-level="14.6.2" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#analysis-settings"><i class="fa fa-check"></i><b>14.6.2</b> Analysis Settings</a></li>
<li class="chapter" data-level="14.6.3" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#execution-settings"><i class="fa fa-check"></i><b>14.6.3</b> Execution settings</a></li>
<li class="chapter" data-level="14.6.4" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#training-settings"><i class="fa fa-check"></i><b>14.6.4</b> Training settings</a></li>
<li class="chapter" data-level="14.6.5" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#importing-and-exporting-a-study"><i class="fa fa-check"></i><b>14.6.5</b> Importing and exporting a study</a></li>
<li class="chapter" data-level="14.6.6" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#downloading-the-study-package"><i class="fa fa-check"></i><b>14.6.6</b> Downloading the study package</a></li>
<li class="chapter" data-level="14.6.7" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#running-the-study"><i class="fa fa-check"></i><b>14.6.7</b> Running the study</a></li>
</ul></li>
<li class="chapter" data-level="14.7" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#implementing-the-study-in-r"><i class="fa fa-check"></i><b>14.7</b> Implementing the study in R</a><ul>
<li class="chapter" data-level="14.7.1" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#cohort-instantiation-2"><i class="fa fa-check"></i><b>14.7.1</b> Cohort instantiation</a></li>
<li class="chapter" data-level="14.7.2" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#data-extraction-3"><i class="fa fa-check"></i><b>14.7.2</b> Data extraction</a></li>
<li class="chapter" data-level="14.7.3" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#additional-inclusion-criteria"><i class="fa fa-check"></i><b>14.7.3</b> Additional inclusion criteria</a></li>
<li class="chapter" data-level="14.7.4" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#model-development"><i class="fa fa-check"></i><b>14.7.4</b> Model Development</a></li>
<li class="chapter" data-level="14.7.5" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#internal-validation"><i class="fa fa-check"></i><b>14.7.5</b> Internal Validation</a></li>
</ul></li>
<li class="chapter" data-level="14.8" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#single-model-viewer-app"><i class="fa fa-check"></i><b>14.8</b> Single model viewer app</a></li>
<li class="chapter" data-level="14.9" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#multiple-model-viewer-app"><i class="fa fa-check"></i><b>14.9</b> Multiple model viewer app</a><ul>
<li class="chapter" data-level="14.9.1" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#viewing-the-model-summary-and-settings"><i class="fa fa-check"></i><b>14.9.1</b> Viewing the model summary and settings</a></li>
<li class="chapter" data-level="14.9.2" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#viewing-model-performance"><i class="fa fa-check"></i><b>14.9.2</b> Viewing model performance</a></li>
<li class="chapter" data-level="14.9.3" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#viewing-the-model"><i class="fa fa-check"></i><b>14.9.3</b> Viewing the model</a></li>
</ul></li>
<li class="chapter" data-level="14.10" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#additional-patient-level-prediction-features"><i class="fa fa-check"></i><b>14.10</b> Additional Patient-level Prediction Features</a><ul>
<li class="chapter" data-level="14.10.1" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#journal-paper-generation"><i class="fa fa-check"></i><b>14.10.1</b> Journal paper generation</a></li>
</ul></li>
<li class="chapter" data-level="14.11" data-path="PatientLevelPrediction.html"><a href="PatientLevelPrediction.html#summary-10"><i class="fa fa-check"></i><b>14.11</b> Summary</a></li>
</ul></li>
<li class="part"><span><b>IV Evidence Quality</b></span></li>
<li class="chapter" data-level="15" data-path="EvidenceQuality.html"><a href="EvidenceQuality.html"><i class="fa fa-check"></i><b>15</b> Evidence Quality</a><ul>
<li class="chapter" data-level="15.1" data-path="EvidenceQuality.html"><a href="EvidenceQuality.html#understanding-evidence-quality"><i class="fa fa-check"></i><b>15.1</b> Understanding Evidence Quality</a></li>
<li class="chapter" data-level="15.2" data-path="EvidenceQuality.html"><a href="EvidenceQuality.html#communicating-evidence-quality"><i class="fa fa-check"></i><b>15.2</b> Communicating Evidence Quality</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="DataQuality.html"><a href="DataQuality.html"><i class="fa fa-check"></i><b>16</b> Data Quality</a><ul>
<li class="chapter" data-level="16.1" data-path="DataQuality.html"><a href="DataQuality.html#sources-of-data-quality-problems"><i class="fa fa-check"></i><b>16.1</b> Sources of data quality problems</a></li>
<li class="chapter" data-level="16.2" data-path="DataQuality.html"><a href="DataQuality.html#data-quality-in-general"><i class="fa fa-check"></i><b>16.2</b> Data quality in general</a><ul>
<li class="chapter" data-level="16.2.1" data-path="DataQuality.html"><a href="DataQuality.html#data-quality-checks"><i class="fa fa-check"></i><b>16.2.1</b> Data quality checks</a></li>
<li class="chapter" data-level="16.2.2" data-path="DataQuality.html"><a href="DataQuality.html#etl-unit-tests"><i class="fa fa-check"></i><b>16.2.2</b> ETL unit tests</a></li>
</ul></li>
<li class="chapter" data-level="16.3" data-path="DataQuality.html"><a href="DataQuality.html#study-specific-checks"><i class="fa fa-check"></i><b>16.3</b> Study-specific checks</a><ul>
<li class="chapter" data-level="16.3.1" data-path="DataQuality.html"><a href="DataQuality.html#checking-mappings"><i class="fa fa-check"></i><b>16.3.1</b> Checking mappings</a></li>
</ul></li>
<li class="chapter" data-level="16.4" data-path="DataQuality.html"><a href="DataQuality.html#achillesInPractice"><i class="fa fa-check"></i><b>16.4</b> ACHILLES in practice</a></li>
<li class="chapter" data-level="16.5" data-path="DataQuality.html"><a href="DataQuality.html#study-specific-checks-in-practice"><i class="fa fa-check"></i><b>16.5</b> Study-specific checks in practice</a></li>
<li class="chapter" data-level="16.6" data-path="DataQuality.html"><a href="DataQuality.html#summary-11"><i class="fa fa-check"></i><b>16.6</b> Summary</a></li>
<li class="chapter" data-level="16.7" data-path="DataQuality.html"><a href="DataQuality.html#exercises-4"><i class="fa fa-check"></i><b>16.7</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="ClinicalValidity.html"><a href="ClinicalValidity.html"><i class="fa fa-check"></i><b>17</b> Clinical Validity</a></li>
<li class="chapter" data-level="18" data-path="SoftwareValidity.html"><a href="SoftwareValidity.html"><i class="fa fa-check"></i><b>18</b> Software Validity</a><ul>
<li class="chapter" data-level="18.1" data-path="SoftwareValidity.html"><a href="SoftwareValidity.html#study-code-validity"><i class="fa fa-check"></i><b>18.1</b> Study code validity</a><ul>
<li class="chapter" data-level="18.1.1" data-path="SoftwareValidity.html"><a href="SoftwareValidity.html#automation"><i class="fa fa-check"></i><b>18.1.1</b> Automation as a requirement for reproducibility</a></li>
<li class="chapter" data-level="18.1.2" data-path="SoftwareValidity.html"><a href="SoftwareValidity.html#programming-best-practices"><i class="fa fa-check"></i><b>18.1.2</b> Programming best practices</a></li>
<li class="chapter" data-level="18.1.3" data-path="SoftwareValidity.html"><a href="SoftwareValidity.html#code-validation"><i class="fa fa-check"></i><b>18.1.3</b> Code validation</a></li>
<li class="chapter" data-level="18.1.4" data-path="SoftwareValidity.html"><a href="SoftwareValidity.html#using-the-methods-library"><i class="fa fa-check"></i><b>18.1.4</b> Using the Methods Library</a></li>
</ul></li>
<li class="chapter" data-level="18.2" data-path="SoftwareValidity.html"><a href="SoftwareValidity.html#methods-library-software-development-process"><i class="fa fa-check"></i><b>18.2</b> Methods Library software development process</a><ul>
<li class="chapter" data-level="18.2.1" data-path="SoftwareValidity.html"><a href="SoftwareValidity.html#source-code-management"><i class="fa fa-check"></i><b>18.2.1</b> Source Code Management</a></li>
<li class="chapter" data-level="18.2.2" data-path="SoftwareValidity.html"><a href="SoftwareValidity.html#documentation-2"><i class="fa fa-check"></i><b>18.2.2</b> Documentation</a></li>
<li class="chapter" data-level="18.2.3" data-path="SoftwareValidity.html"><a href="SoftwareValidity.html#availability-of-current-and-historical-archive-versions"><i class="fa fa-check"></i><b>18.2.3</b> Availability of Current and Historical Archive Versions</a></li>
<li class="chapter" data-level="18.2.4" data-path="SoftwareValidity.html"><a href="SoftwareValidity.html#maintenance-support-and-retirement"><i class="fa fa-check"></i><b>18.2.4</b> Maintenance, Support and Retirement</a></li>
<li class="chapter" data-level="18.2.5" data-path="SoftwareValidity.html"><a href="SoftwareValidity.html#qualified-personnel"><i class="fa fa-check"></i><b>18.2.5</b> Qualified Personnel</a></li>
<li class="chapter" data-level="18.2.6" data-path="SoftwareValidity.html"><a href="SoftwareValidity.html#physical-and-logical-security"><i class="fa fa-check"></i><b>18.2.6</b> Physical and Logical Security</a></li>
<li class="chapter" data-level="18.2.7" data-path="SoftwareValidity.html"><a href="SoftwareValidity.html#disaster-recovery"><i class="fa fa-check"></i><b>18.2.7</b> Disaster Recovery</a></li>
</ul></li>
<li class="chapter" data-level="18.3" data-path="SoftwareValidity.html"><a href="SoftwareValidity.html#methods-library-testing"><i class="fa fa-check"></i><b>18.3</b> Methods Library testing</a><ul>
<li class="chapter" data-level="18.3.1" data-path="SoftwareValidity.html"><a href="SoftwareValidity.html#unit-test"><i class="fa fa-check"></i><b>18.3.1</b> Unit test</a></li>
<li class="chapter" data-level="18.3.2" data-path="SoftwareValidity.html"><a href="SoftwareValidity.html#simulation"><i class="fa fa-check"></i><b>18.3.2</b> Simulation</a></li>
</ul></li>
<li class="chapter" data-level="18.4" data-path="SoftwareValidity.html"><a href="SoftwareValidity.html#summary-12"><i class="fa fa-check"></i><b>18.4</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="MethodValidity.html"><a href="MethodValidity.html"><i class="fa fa-check"></i><b>19</b> Method Validity</a><ul>
<li class="chapter" data-level="19.1" data-path="MethodValidity.html"><a href="MethodValidity.html#design-specific-diagnostics"><i class="fa fa-check"></i><b>19.1</b> Design-specific diagnostics</a></li>
<li class="chapter" data-level="19.2" data-path="MethodValidity.html"><a href="MethodValidity.html#diagnostics-for-all-estimation"><i class="fa fa-check"></i><b>19.2</b> Diagnostics for all estimation</a><ul>
<li class="chapter" data-level="19.2.1" data-path="MethodValidity.html"><a href="MethodValidity.html#NegativeControls"><i class="fa fa-check"></i><b>19.2.1</b> Negative controls</a></li>
<li class="chapter" data-level="19.2.2" data-path="MethodValidity.html"><a href="MethodValidity.html#PositiveControls"><i class="fa fa-check"></i><b>19.2.2</b> Positive controls</a></li>
<li class="chapter" data-level="19.2.3" data-path="MethodValidity.html"><a href="MethodValidity.html#metrics"><i class="fa fa-check"></i><b>19.2.3</b> Empirical evaluation</a></li>
<li class="chapter" data-level="19.2.4" data-path="MethodValidity.html"><a href="MethodValidity.html#p-value-calibration"><i class="fa fa-check"></i><b>19.2.4</b> P-value calibration</a></li>
<li class="chapter" data-level="19.2.5" data-path="MethodValidity.html"><a href="MethodValidity.html#confidence-interval-calibration"><i class="fa fa-check"></i><b>19.2.5</b> Confidence interval calibration</a></li>
<li class="chapter" data-level="19.2.6" data-path="MethodValidity.html"><a href="MethodValidity.html#replication-across-sites"><i class="fa fa-check"></i><b>19.2.6</b> Replication across sites</a></li>
<li class="chapter" data-level="19.2.7" data-path="MethodValidity.html"><a href="MethodValidity.html#sensitivity-analyses"><i class="fa fa-check"></i><b>19.2.7</b> Sensitivity analyses</a></li>
</ul></li>
<li class="chapter" data-level="19.3" data-path="MethodValidity.html"><a href="MethodValidity.html#method-validation-in-practice"><i class="fa fa-check"></i><b>19.3</b> Method validation in practice</a><ul>
<li class="chapter" data-level="19.3.1" data-path="MethodValidity.html"><a href="MethodValidity.html#selecting-negative-controls"><i class="fa fa-check"></i><b>19.3.1</b> Selecting negative controls</a></li>
<li class="chapter" data-level="19.3.2" data-path="MethodValidity.html"><a href="MethodValidity.html#including-controls"><i class="fa fa-check"></i><b>19.3.2</b> Including controls</a></li>
<li class="chapter" data-level="19.3.3" data-path="MethodValidity.html"><a href="MethodValidity.html#empirical-performance"><i class="fa fa-check"></i><b>19.3.3</b> Empirical performance</a></li>
<li class="chapter" data-level="19.3.4" data-path="MethodValidity.html"><a href="MethodValidity.html#p-value-calibration-1"><i class="fa fa-check"></i><b>19.3.4</b> P-value calibration</a></li>
<li class="chapter" data-level="19.3.5" data-path="MethodValidity.html"><a href="MethodValidity.html#confidence-interval-calibration-1"><i class="fa fa-check"></i><b>19.3.5</b> Confidence interval calibration</a></li>
<li class="chapter" data-level="19.3.6" data-path="MethodValidity.html"><a href="MethodValidity.html#between-database-heterogeneity"><i class="fa fa-check"></i><b>19.3.6</b> Between-database heterogeneity</a></li>
<li class="chapter" data-level="19.3.7" data-path="MethodValidity.html"><a href="MethodValidity.html#sensitivity-analyses-1"><i class="fa fa-check"></i><b>19.3.7</b> Sensitivity analyses</a></li>
</ul></li>
<li class="chapter" data-level="19.4" data-path="MethodValidity.html"><a href="MethodValidity.html#ohdsi-methods-benchmark"><i class="fa fa-check"></i><b>19.4</b> OHDSI Methods Benchmark</a></li>
<li class="chapter" data-level="19.5" data-path="MethodValidity.html"><a href="MethodValidity.html#summary-13"><i class="fa fa-check"></i><b>19.5</b> Summary</a></li>
</ul></li>
<li class="part"><span><b>V OHDSI Studies</b></span></li>
<li class="chapter" data-level="20" data-path="StudySteps.html"><a href="StudySteps.html"><i class="fa fa-check"></i><b>20</b> Study steps</a><ul>
<li class="chapter" data-level="20.1" data-path="StudySteps.html"><a href="StudySteps.html#general-best-practice-guidelines"><i class="fa fa-check"></i><b>20.1</b> General Best Practice Guidelines</a><ul>
<li class="chapter" data-level="20.1.1" data-path="StudySteps.html"><a href="StudySteps.html#observational-study-definition"><i class="fa fa-check"></i><b>20.1.1</b> Observational Study Definition</a></li>
<li class="chapter" data-level="20.1.2" data-path="StudySteps.html"><a href="StudySteps.html#pre-specification-of-study-design"><i class="fa fa-check"></i><b>20.1.2</b> Pre-specification of Study Design</a></li>
<li class="chapter" data-level="20.1.3" data-path="StudySteps.html"><a href="StudySteps.html#protocol"><i class="fa fa-check"></i><b>20.1.3</b> Protocol</a></li>
<li class="chapter" data-level="20.1.4" data-path="StudySteps.html"><a href="StudySteps.html#standardized-analyses"><i class="fa fa-check"></i><b>20.1.4</b> Standardized analyses</a></li>
<li class="chapter" data-level="20.1.5" data-path="StudySteps.html"><a href="StudySteps.html#study-packages"><i class="fa fa-check"></i><b>20.1.5</b> Study packages</a></li>
<li class="chapter" data-level="20.1.6" data-path="StudySteps.html"><a href="StudySteps.html#the-data-underlying-the-cdm"><i class="fa fa-check"></i><b>20.1.6</b> The data underlying the CDM</a></li>
</ul></li>
<li class="chapter" data-level="20.2" data-path="StudySteps.html"><a href="StudySteps.html#study-steps-in-detail"><i class="fa fa-check"></i><b>20.2</b> Study Steps in detail</a><ul>
<li class="chapter" data-level="20.2.1" data-path="StudySteps.html"><a href="StudySteps.html#define-question"><i class="fa fa-check"></i><b>20.2.1</b> Define question</a></li>
<li class="chapter" data-level="20.2.2" data-path="StudySteps.html"><a href="StudySteps.html#review-data-availability-and-quality"><i class="fa fa-check"></i><b>20.2.2</b> Review data availability and quality</a></li>
<li class="chapter" data-level="20.2.3" data-path="StudySteps.html"><a href="StudySteps.html#study-populations"><i class="fa fa-check"></i><b>20.2.3</b> Study Populations</a></li>
<li class="chapter" data-level="20.2.4" data-path="StudySteps.html"><a href="StudySteps.html#Feasibility"><i class="fa fa-check"></i><b>20.2.4</b> Feasibility and Diagnostics</a></li>
<li class="chapter" data-level="20.2.5" data-path="StudySteps.html"><a href="StudySteps.html#finalize-protocol-and-study-package"><i class="fa fa-check"></i><b>20.2.5</b> Finalize protocol and study package</a></li>
<li class="chapter" data-level="20.2.6" data-path="StudySteps.html"><a href="StudySteps.html#execute-study"><i class="fa fa-check"></i><b>20.2.6</b> Execute Study</a></li>
<li class="chapter" data-level="20.2.7" data-path="StudySteps.html"><a href="StudySteps.html#interpretation-and-write-up"><i class="fa fa-check"></i><b>20.2.7</b> Interpretation and write-up</a></li>
</ul></li>
<li class="chapter" data-level="20.3" data-path="StudySteps.html"><a href="StudySteps.html#summary-14"><i class="fa fa-check"></i><b>20.3</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="21" data-path="NetworkResearch.html"><a href="NetworkResearch.html"><i class="fa fa-check"></i><b>21</b> OHDSI Network Research</a><ul>
<li class="chapter" data-level="21.1" data-path="NetworkResearch.html"><a href="NetworkResearch.html#what-is-the-ohdsi-research-network"><i class="fa fa-check"></i><b>21.1</b> What is the OHDSI Research Network?</a></li>
<li class="chapter" data-level="21.2" data-path="NetworkResearch.html"><a href="NetworkResearch.html#what-is-an-ohdsi-network-study"><i class="fa fa-check"></i><b>21.2</b> What is an OHDSI Network Study?</a></li>
<li class="chapter" data-level="21.3" data-path="NetworkResearch.html"><a href="NetworkResearch.html#executing-an-ohdsi-network-study"><i class="fa fa-check"></i><b>21.3</b> Executing an OHDSI Network Study</a><ul>
<li class="chapter" data-level="21.3.1" data-path="NetworkResearch.html"><a href="NetworkResearch.html#study-feasibility-and-design"><i class="fa fa-check"></i><b>21.3.1</b> Study Feasibility and Design</a></li>
<li class="chapter" data-level="21.3.2" data-path="NetworkResearch.html"><a href="NetworkResearch.html#study-execution"><i class="fa fa-check"></i><b>21.3.2</b> Study Execution</a></li>
<li class="chapter" data-level="21.3.3" data-path="NetworkResearch.html"><a href="NetworkResearch.html#results-dissemination-and-publication"><i class="fa fa-check"></i><b>21.3.3</b> Results Dissemination and Publication</a></li>
</ul></li>
<li class="chapter" data-level="21.4" data-path="NetworkResearch.html"><a href="NetworkResearch.html#types-of-network-studies"><i class="fa fa-check"></i><b>21.4</b> Types of Network Studies</a></li>
<li class="chapter" data-level="21.5" data-path="NetworkResearch.html"><a href="NetworkResearch.html#forward-looking-using-network-study-automation"><i class="fa fa-check"></i><b>21.5</b> Forward Looking: Using Network Study Automation</a></li>
<li class="chapter" data-level="21.6" data-path="NetworkResearch.html"><a href="NetworkResearch.html#best-practices-for-network-research"><i class="fa fa-check"></i><b>21.6</b> Best Practices for Network Research</a></li>
<li class="chapter" data-level="21.7" data-path="NetworkResearch.html"><a href="NetworkResearch.html#example-legend---hypertension"><i class="fa fa-check"></i><b>21.7</b> Example: LEGEND - Hypertension</a></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="Glossary.html"><a href="Glossary.html"><i class="fa fa-check"></i><b>A</b> Glossary</a></li>
<li class="chapter" data-level="B" data-path="CohortDefinitions.html"><a href="CohortDefinitions.html"><i class="fa fa-check"></i><b>B</b> Cohort definitions</a><ul>
<li class="chapter" data-level="B.1" data-path="CohortDefinitions.html"><a href="CohortDefinitions.html#AceInhibitors"><i class="fa fa-check"></i><b>B.1</b> ACE inhibitors</a></li>
<li class="chapter" data-level="B.2" data-path="CohortDefinitions.html"><a href="CohortDefinitions.html#AceInhibitorsMono"><i class="fa fa-check"></i><b>B.2</b> New users of ACE inhibitors monotherapy</a></li>
<li class="chapter" data-level="B.3" data-path="CohortDefinitions.html"><a href="CohortDefinitions.html#Ami"><i class="fa fa-check"></i><b>B.3</b> Acute myocardial infarction (AMI)</a></li>
<li class="chapter" data-level="B.4" data-path="CohortDefinitions.html"><a href="CohortDefinitions.html#Angioedema"><i class="fa fa-check"></i><b>B.4</b> Angioedema</a></li>
<li class="chapter" data-level="B.5" data-path="CohortDefinitions.html"><a href="CohortDefinitions.html#ThiazidesMono"><i class="fa fa-check"></i><b>B.5</b> New users of Thiazide-like diuretics monotherapy</a></li>
<li class="chapter" data-level="B.6" data-path="CohortDefinitions.html"><a href="CohortDefinitions.html#HTN1yrFO"><i class="fa fa-check"></i><b>B.6</b> Patients initiating first-line therapy for hypertension</a></li>
<li class="chapter" data-level="B.7" data-path="CohortDefinitions.html"><a href="CohortDefinitions.html#HTN3yrFO"><i class="fa fa-check"></i><b>B.7</b> Patients initiating first-line therapy for hypertension with &gt;3 yr follow-up</a></li>
<li class="chapter" data-level="B.8" data-path="CohortDefinitions.html"><a href="CohortDefinitions.html#ACEiUse"><i class="fa fa-check"></i><b>B.8</b> ACE inhibitor use</a></li>
<li class="chapter" data-level="B.9" data-path="CohortDefinitions.html"><a href="CohortDefinitions.html#ARBUse"><i class="fa fa-check"></i><b>B.9</b> Angiotensin receptor blocker (ARB) use</a></li>
<li class="chapter" data-level="B.10" data-path="CohortDefinitions.html"><a href="CohortDefinitions.html#THZUse"><i class="fa fa-check"></i><b>B.10</b> Thiazide or thiazide-like diuretic use</a></li>
<li class="chapter" data-level="B.11" data-path="CohortDefinitions.html"><a href="CohortDefinitions.html#dCCBUse"><i class="fa fa-check"></i><b>B.11</b> dihydropyridine Calcium Channel Blocker (dCCB) use</a></li>
<li class="chapter" data-level="B.12" data-path="CohortDefinitions.html"><a href="CohortDefinitions.html#ndCCBUse"><i class="fa fa-check"></i><b>B.12</b> non-dihydropyridine Calcium Channel Blocker (ndCCB) use</a></li>
<li class="chapter" data-level="B.13" data-path="CohortDefinitions.html"><a href="CohortDefinitions.html#BBUse"><i class="fa fa-check"></i><b>B.13</b> beta blocker use</a></li>
<li class="chapter" data-level="B.14" data-path="CohortDefinitions.html"><a href="CohortDefinitions.html#DLoopUse"><i class="fa fa-check"></i><b>B.14</b> Diuretic-loop use</a></li>
<li class="chapter" data-level="B.15" data-path="CohortDefinitions.html"><a href="CohortDefinitions.html#DPUse"><i class="fa fa-check"></i><b>B.15</b> Diuretic-potassium sparing use</a></li>
<li class="chapter" data-level="B.16" data-path="CohortDefinitions.html"><a href="CohortDefinitions.html#A1BUse"><i class="fa fa-check"></i><b>B.16</b> alpha-1 blocker use</a></li>
</ul></li>
<li class="chapter" data-level="C" data-path="NegativeControlsAppendix.html"><a href="NegativeControlsAppendix.html"><i class="fa fa-check"></i><b>C</b> Negative controls</a><ul>
<li class="chapter" data-level="C.1" data-path="NegativeControlsAppendix.html"><a href="NegativeControlsAppendix.html#AceiThzNsc"><i class="fa fa-check"></i><b>C.1</b> ACEi and THZ</a></li>
</ul></li>
<li class="chapter" data-level="D" data-path="ProtocolTemplate.html"><a href="ProtocolTemplate.html"><i class="fa fa-check"></i><b>D</b> Protocol template</a></li>
<li class="chapter" data-level="E" data-path="SuggestedAnswers.html"><a href="SuggestedAnswers.html"><i class="fa fa-check"></i><b>E</b> Suggested Answers</a><ul>
<li class="chapter" data-level="E.1" data-path="SuggestedAnswers.html"><a href="SuggestedAnswers.html#SqlAndRanswers"><i class="fa fa-check"></i><b>E.1</b> SQL and R</a></li>
<li class="chapter" data-level="E.2" data-path="SuggestedAnswers.html"><a href="SuggestedAnswers.html#DataQualityanswers"><i class="fa fa-check"></i><b>E.2</b> Data Quality</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">The Book of OHDSI</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="PopulationLevelEstimation" class="section level1">
<h1><span class="header-section-number">Chapter 13</span> Population-Level Estimation</h1>
<p><em>Chapter leads: Martijn Schuemie, David Madigan, Marc Suchard &amp; Patrick Ryan</em></p>
<p></p>
<p>Observational healthcare data, such as administrative claims and electronic health records, offer opportunities to generate real-world evidence about the effect of treatments that can meaningfully improve the lives of patients. In this chapter we focus on population-level effect estimation, which refers to the estimation of average causal effects of exposures (e.g.medical interventions such as drug exposures or procedures) on specific health outcomes of interest. In what follows, we consider two different estimation tasks:</p>
<ul>
<li><strong>Direct effect estimation</strong>: estimating the effect of an exposure on the risk of an outcome, as compared to no exposure. </li>
<li><strong>Comparative effect estimation</strong>: estimating the effect of an exposure (the target exposure) on the risk of an outcome, as compared to another exposure (the comparator exposure). </li>
</ul>
<p>In both cases, the patient-level causal effect contrasts a factual outcome, i.e., what happened to the exposed patient, with a counterfactual outcome, i.e., what would have happened had the exposure not occurred (direct) or had a different exposure occurred (comparative). Since any one patient reveals only the factual outcome (the fundamental problem of causal inference), the various effect estimation designs employ different analytic devices to shed light on the counterfactual outcomes. </p>
<p>Use-cases for population-level effect estimation include treatment selection, safety surveillance, and comparative effectiveness. Methods can test specific hypotheses one at a time (e.g.signal evaluation) or explore multiple-hypotheses-at-once (e.g.signal detection). In all cases, the objective remains the same: to produce a high-quality estimate of the causal effect.  </p>
<p>In this chapter we first describe various population-level estimation study designs, all of which are implemented as R packages in the <a href="https://ohdsi.github.io/MethodsLibrary/">OHDSI Methods Library</a>. We then detail the design of an example estimation study, followed by step-by-step guides of how to implement the design using ATLAS and R. Finally, we review the various outputs generated by the study, including study diagnostics and effect size estimates.</p>
<div id="CohortMethod" class="section level2">
<h2><span class="header-section-number">13.1</span> The cohort method design</h2>
<p></p>
<div class="figure" style="text-align: center"><span id="fig:cohortMethod"></span>
<img src="images/PopulationLevelEstimation/cohortMethod.png" alt="The new-user cohort design. Subjects observed to initiate the target treatment are compared to those initiating the comparator treatment. To adjust for differences between the two treatment groups several adjustment strategies can be used, such as stratification, matching, or weighting by the propensity score, or by adding baseline characteristcs to the outcome model. The characteristics included in the propensity model or outcome model are captured prior to treatment initiation." width="90%" />
<p class="caption">
Figure 13.1: The new-user cohort design. Subjects observed to initiate the target treatment are compared to those initiating the comparator treatment. To adjust for differences between the two treatment groups several adjustment strategies can be used, such as stratification, matching, or weighting by the propensity score, or by adding baseline characteristcs to the outcome model. The characteristics included in the propensity model or outcome model are captured prior to treatment initiation.
</p>
</div>
<p>The cohort method attempts to emulate a randomized clinical trial <span class="citation">(Hernan and Robins <a href="#ref-hernan_2016" role="doc-biblioref">2016</a>)</span>. Subjects that are observed to initiate one treatment (the target) are compared to subjects initiating another treatment (the comparator) and are followed for a specific amount of time following treatment initiation, for example the time they stay on the treatment. We can specify the questions we wish to answer in a cohort study by making the five choices highlighted in Table <a href="PopulationLevelEstimation.html#tab:cmChoices">13.1</a>.   </p>
<table>
<caption><span id="tab:cmChoices">Table 13.1: </span> Main design choices in a comparative cohort design.</caption>
<colgroup>
<col width="24%" />
<col width="76%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Choice</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Target cohort</td>
<td align="left">A cohort representing the target treatment</td>
</tr>
<tr class="even">
<td align="left">Comparator cohort</td>
<td align="left">A cohort representing the comparator treatment</td>
</tr>
<tr class="odd">
<td align="left">Outcome cohort</td>
<td align="left">A cohort representing the outcome of interest</td>
</tr>
<tr class="even">
<td align="left">Time-at-risk</td>
<td align="left">At what time (often relative to the target and comparator cohort start and end dates) do we consider the risk of the outcome?</td>
</tr>
<tr class="odd">
<td align="left">Model</td>
<td align="left">The model used to estimate the effect while adjusting for differences between the target and comparator</td>
</tr>
</tbody>
</table>
<p>The choice of model specifies, among others, the type of model. For example, we could use a logistic regression, which evaluates whether or not the outcome has occurred, and produces an odds ratio. A logistic regression assumes the time-at-risk is of the same length for both target and comparator, or is irrelevant. Alternatively, we could choose a Poisson regression which estimates the incidence rate ratio, assuming a constant incidence rate. Often a Cox regression is used which considers time to first outcome to estimate the hazard ratio, assuming proportional hazards between target and comparator.    </p>

<div class="rmdimportant">
The new-user cohort method inherently is a method for comparative effect estimation, comparing one treatment to another. It is difficult to use this method to compare a treatment against no treatment, since it is hard to define a group of unexposed people that is comparable with the exposed group. If one wants to use this design for direct effect estimation, the preferred way is to select a comparator treatment for the same indication as the exposure of interest, where the comparator treatment is believed to have no effect on the outcome. Unfortunately, such a comparator might not always be available.
</div>

<p>A key concern is that the patients receiving the target treatment may systematically differ from those receiving the comparator treatment. For example, suppose the target cohort is on average 60 years old, whereas the comparator cohort is on average 40 years old. Comparing target to comparator with respect to any age-related health outcome (e.g.stroke) might then show substantial differences. An uninformed investigator might reach the conclusion there is a causal association between the target treatment and stroke as compared to the comparator. More prosaically or commonplace, the investigator might conclude that there exist target patients that experienced stroke that would not have done so had they received the comparator. This conclusion could well be entirely incorrect! Maybe those target patients disproportionately experienced stroke simply because they are older; maybe the target patients that experienced stroke might well have done so even if they had received the comparator. In this context, age is a confounder. One mechanism to deal with confounders in observational studies is through propensity scores. </p>
<div id="propensity-scores" class="section level3">
<h3><span class="header-section-number">13.1.1</span> Propensity scores</h3>
<p></p>
<p>In a randomized trial, a (virtual) coin toss assigns patients to their respective groups. Thus, by design, the probability that a patient receives the target treatment as against the comparator treatment does not relate in any way to patient characteristics such as age. The coin has no knowledge of the patient, and, whats more, we know with certainty the exact probability that a patient receives the target exposure. As a consequence, and with increasing confidence as the number of patients in the trial increases, the two groups of patients essentially <em>cannot</em> differ systematically with respect to <em>any</em> patient characteristic. This guaranteed balance holds true for characteristics that the trial measured (such as age) as well as characteristics that the trial failed to measure. </p>
<p>For a given patient, the <em>propensity score</em> (PS) is the probability that that patient received the target treatment as against the comparator. <span class="citation">(Rosenbaum and Rubin <a href="#ref-rosenbaum_1983" role="doc-biblioref">1983</a>)</span> In a balanced two-arm randomized trial, the propensity score is 0.5 for every patient. In a propensity score-adjusted observational study, we estimate the probability of a patient receiving the target treatment based on what we can observe in the data on and before the time of treatment initiation (irrespective of the treatment they actually received). This is a straightforward predictive modeling application; we fit a model (e.g.a logistic regression) that predicts whether a subject receives the target treatment, and use this model to generate predicted probabilities (the PS) for each subject. Unlike in a standard randomized trial, different patients will have different probabilities of receiving the target treatment. The PS can be used in several ways including matching target subjects to comparator subjects with similar PS, stratifying the study population based on the PS, or weighting subjects using Inverse Probability of Treatment Weighting (IPTW) derived from the PS. When matching we can select just one comparator subject for each target subject, or we can allow more than one comparator subject per target subject, a technique know as variable-ratio matching. <span class="citation">(Rassen et al. <a href="#ref-rassen_2012" role="doc-biblioref">2012</a>)</span>      </p>
<p>For example, suppose we use one-on-one PS matching, and that Jan has a priori probability of 0.4 of receiving the target treatment and in fact receives the target treatment. If we can find a patient (named Jun) that also had an a priori probability of 0.4 of receiving the target treatment but in fact received the comparator, the comparison of Jan and Juns outcomes is like a mini-randomized trial, at least with respect to measured confounders. This comparison will yield an estimate of the Jan-Jun causal contrast that is as good as the one randomization would have produced. Estimation then proceeds as follows: for every patient that received the target, find one or more matched patients that received the comparator but had the same prior probability of receiving the target. Compare the outcome for the target patient with the outcomes for the comparator patients within each of these matched groups.</p>
<p>Propensity scoring controls for measured confounders. In fact, if treatment assignment is strongly ignorable given measured characteristics, propensity scoring will yield an unbiased estimate of the causal effect. Strongly ignorable essentially means that there are no unmeasured confounders, and that the measured confounders are adjusted for appropriately. Unfortunately this is not a testable assumption. See Chapter <a href="MethodValidity.html#MethodValidity">19</a> for further discussion of this issue. </p>
</div>
<div id="VariableSelection" class="section level3">
<h3><span class="header-section-number">13.1.2</span> Variable selection</h3>
<p>In the past, PS were computed based on manually selected characteristics, and although the OHDSI tools can support such practices, we prefer using many generic characteristics (i.e.characteristics that are not selected based on the specific exposures and outcomes in the study). <span class="citation">(Tian, Schuemie, and Suchard <a href="#ref-tian_2018" role="doc-biblioref">2018</a>)</span> These characteristics include demographics, as well as all diagnoses, drug exposures, measurement, and medical procedures observed prior to and on the day of treatment initiation. A model typically involves 10,000 to 100,000 unique characteristics, which we fit using large-scale regularized regression <span class="citation">(Suchard et al. <a href="#ref-suchard_2013" role="doc-biblioref">2013</a>)</span> implemented in the <a href="https://ohdsi.github.io/Cyclops/">Cyclops</a> package. In essence, we let the data appropriately weigh the characteristics.</p>

<div class="rmdimportant">
We typically include the day of treatment initiation in the covariate capture window because many relevant data points such as the diagnosis leading to the treatment are recorded on that date. This does require us to explicitly exclude the target and comparator treatment from the set of covariates, because these are the things we are trying to predict.
</div>

<p>Some have argued that a data-driven approach to covariate selection that does not depend on clinical expertise to specify the right causal structure runs the risk of erroneously including so-called instrumental variables and colliders, thus increasing variance and potentially introducing bias. <span class="citation">(Hernan et al. <a href="#ref-hernan_2002" role="doc-biblioref">2002</a>)</span> However, these concerns are unlikely to have a large impact in real-world scenarios. <span class="citation">(Schneeweiss <a href="#ref-schneeweiss_2018" role="doc-biblioref">2018</a>)</span> Furthermore, in medicine the true causal structure is rarely known, and when different researchers are asked to identify the right covariates to include for a specific research question, each researcher invariably comes up with a different list, thus making the process irreproducible. Most importantly, our diagnostics such as inspection of the propensity model, evaluating balance on all covariates, and including negative controls would identify most problems related to colliders and instrumental variables.  </p>
</div>
<div id="caliper" class="section level3">
<h3><span class="header-section-number">13.1.3</span> Caliper</h3>
<p></p>
<p>Since propensity scores fall on a continuum from 0 to 1, exact matching is rarely possible. Instead, the matching process finds patients that match the propensity score of a target patient(s) within some tolerance known as a caliper. Following <span class="citation">Austin (<a href="#ref-austin_2011" role="doc-biblioref">2011</a>)</span>, we use a default caliper of 0.2 standard deviations on the logit scale.</p>
</div>
<div id="overlap-preference-scores" class="section level3">
<h3><span class="header-section-number">13.1.4</span> Overlap: preference scores</h3>
<p></p>
<p>The propensity method requires that matching patients exist! As such, a key diagnostic shows the distribution of the propensity scores in the two groups. To facilitate interpretation, the OHDSI tools plot a transformation of the propensity score called the preference score. <span class="citation">(Walker et al. <a href="#ref-walker_2013" role="doc-biblioref">2013</a>)</span> The preference score adjusts for the market share of the two treatments. For example, if 10% of patients receive the target treatment (and 90% receive the comparator treatment), then patients with a preference score of 0.5 have a 10% probability of receiving the target treatment. Mathematically, the preference score is</p>
<p><span class="math display">\[\ln\left(\frac{F}{1-F}\right)=\ln\left(\frac{S}{1-S}\right)-\ln\left(\frac{P}{1-P}\right)\]</span></p>
<p>Where <span class="math inline">\(F\)</span> is the preference score, <span class="math inline">\(S\)</span> is the propensity score, and <span class="math inline">\(P\)</span> is the proportion of patients receiving the target treatment.</p>
<p><span class="citation">Walker et al. (<a href="#ref-walker_2013" role="doc-biblioref">2013</a>)</span> discuss the concept of empirical equipoise. They accept exposure pairs as emerging from empirical equipoise if at least half of the exposures are to patients with a preference score of between 0.3 and 0.7. </p>
</div>
<div id="balance" class="section level3">
<h3><span class="header-section-number">13.1.5</span> Balance</h3>
<p> </p>
<p>Good practice always checks that the PS adjustment succeeds in creating balanced groups of patients. Figure <a href="PopulationLevelEstimation.html#fig:balance">13.19</a> shows the standard OHDSI output for checking balance. For each patient characteristic, this plots the standardized difference between means between the two exposure groups before and after PS adjustment. Some guidelines recommend an after-adjustment standardized difference upper bound of 0.1. <span class="citation">(Rubin <a href="#ref-rubin_2001" role="doc-biblioref">2001</a>)</span></p>
</div>
</div>
<div id="the-self-controlled-cohort-design" class="section level2">
<h2><span class="header-section-number">13.2</span> The self-controlled cohort design</h2>
<p></p>
<div class="figure" style="text-align: center"><span id="fig:scc"></span>
<img src="images/PopulationLevelEstimation/selfControlledCohort.png" alt="The self-controlled cohort design. The rate of outcomes during exposure to the target is compared to the rate of outcomes in the time pre-exposure." width="90%" />
<p class="caption">
Figure 13.2: The self-controlled cohort design. The rate of outcomes during exposure to the target is compared to the rate of outcomes in the time pre-exposure.
</p>
</div>
<p>The self-controlled cohort (SCC) design <span class="citation">(Ryan, Schuemie, and Madigan <a href="#ref-ryan_2013" role="doc-biblioref">2013</a>)</span> compares the rate of outcomes during exposure to the rate of outcomes in the time just prior to the exposure. The four choices shown in Table <a href="PopulationLevelEstimation.html#tab:sccChoices">13.2</a> define a self-controlled cohort question.  </p>
<table>
<caption><span id="tab:sccChoices">Table 13.2: </span> Main design choices in a self-controlled cohort design.</caption>
<colgroup>
<col width="24%" />
<col width="76%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Choice</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Target cohort</td>
<td align="left">A cohort representing the treatment</td>
</tr>
<tr class="even">
<td align="left">Outcome cohort</td>
<td align="left">A cohort representing the outcome of interest</td>
</tr>
<tr class="odd">
<td align="left">Time-at-risk</td>
<td align="left">At what time (often relative to the target cohort start and end dates) do we consider the risk of the outcome?</td>
</tr>
<tr class="even">
<td align="left">Control time</td>
<td align="left">The time period used as the control time</td>
</tr>
</tbody>
</table>
<p>Because the same subject that make up the exposed group are also used as the control group, no adjustment for between-person differences need to be made. However, the method is vulnerable to other differences, such as differences in the baseline risk of the outcome between different time periods.</p>
</div>
<div id="the-case-control-design" class="section level2">
<h2><span class="header-section-number">13.3</span> The case-control design</h2>
<p></p>
<div class="figure" style="text-align: center"><span id="fig:caseControl"></span>
<img src="images/PopulationLevelEstimation/caseControl.png" alt="The case-control design. Subjects with the outcome (cases) are compared to subjects without the outcome (controls) in terms of their exposure status. Often, cases and controls are matched on various characteristics such as age and sex." width="90%" />
<p class="caption">
Figure 13.3: The case-control design. Subjects with the outcome (cases) are compared to subjects without the outcome (controls) in terms of their exposure status. Often, cases and controls are matched on various characteristics such as age and sex.
</p>
</div>
<p>Case-control studies <span class="citation">(Vandenbroucke and Pearce <a href="#ref-vandenbroucke_2012" role="doc-biblioref">2012</a>)</span> consider the question are persons with a specific disease outcome exposed more frequently to a specific agent than those without the disease? Thus, the central idea is to compare cases, i.e., subjects that experience the outcome of interest, with controls, i.e., subjects that did not experience the outcome of interest. The choices in Table <a href="PopulationLevelEstimation.html#tab:ccChoices">13.3</a> define a case-control question.   </p>
<table>
<caption><span id="tab:ccChoices">Table 13.3: </span> Main design choices in a case-control design.</caption>
<colgroup>
<col width="23%" />
<col width="76%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Choice</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Outcome cohort</td>
<td align="left">A cohort representing the cases (the outcome of interest)</td>
</tr>
<tr class="even">
<td align="left">Control cohort</td>
<td align="left">A cohort representing the controls. Typically the control cohort is automatically derived from the outcome cohort using some selection logic</td>
</tr>
<tr class="odd">
<td align="left">Target cohort</td>
<td align="left">A cohort representing the treatment</td>
</tr>
<tr class="even">
<td align="left">Nesting cohort</td>
<td align="left">Optionally, a cohort defining the subpopulation from which cases and controls are drawn</td>
</tr>
<tr class="odd">
<td align="left">Time-at-risk</td>
<td align="left">At what time (often relative to the index date) do we consider exposure status?</td>
</tr>
</tbody>
</table>
<p>Often, one selects controls to match cases based on characteristics such as age and sex to make them more comparable. Another widespread practice is to nest the analysis within a specific subgroup of people, for example people that have all been diagnosed with one of the indications of the exposure of interest.</p>
</div>
<div id="the-case-crossover-design" class="section level2">
<h2><span class="header-section-number">13.4</span> The case-crossover design</h2>
<p></p>
<div class="figure" style="text-align: center"><span id="fig:caseCrossover"></span>
<img src="images/PopulationLevelEstimation/caseCrossover.png" alt="The case-crossover design. The time around the outcome is compared to a control date set at a predefined interval prior to the outcome date." width="90%" />
<p class="caption">
Figure 13.4: The case-crossover design. The time around the outcome is compared to a control date set at a predefined interval prior to the outcome date.
</p>
</div>
<p>The case-crossover <span class="citation">(Maclure <a href="#ref-maclure_1991" role="doc-biblioref">1991</a>)</span> design evaluates whether the rate of exposure is different at the time of the outcome than at some predefined number of days prior to the outcome. It is trying to determine whether there is something special about the day the outcome occurred. Table <a href="PopulationLevelEstimation.html#tab:ccrChoices">13.4</a> shows the choices that define a case-crossover question.  </p>
<table>
<caption><span id="tab:ccrChoices">Table 13.4: </span> Main design choices in a case-crossover design.</caption>
<colgroup>
<col width="24%" />
<col width="76%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Choice</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Outcome cohort</td>
<td align="left">A cohort representing the cases (the outcome of interest)</td>
</tr>
<tr class="even">
<td align="left">Target cohort</td>
<td align="left">A cohort representing the treatment</td>
</tr>
<tr class="odd">
<td align="left">Time-at-risk</td>
<td align="left">At what time (often relative to the index date) do we consider exposure status?</td>
</tr>
<tr class="even">
<td align="left">Control time</td>
<td align="left">The time period used as the control time</td>
</tr>
</tbody>
</table>
<p>Cases serve as their own controls. As self-controlled designs, they should be robust to confounding due to between-person differences. One concern is that, because the outcome date is always later than the control date, the method will be positively biased if the overall frequency of exposure increases over time (or negatively biased if there is a decrease). To address this, the case-time-control design <span class="citation">(Suissa <a href="#ref-suissa_1995" role="doc-biblioref">1995</a>)</span> was developed, which adds controls, matched for example on age and sex, to the case-crossover design to adjust for exposure trends. </p>
</div>
<div id="the-self-controlled-case-series-design" class="section level2">
<h2><span class="header-section-number">13.5</span> The self-controlled case series design</h2>
<p></p>
<div class="figure" style="text-align: center"><span id="fig:selfControlledCaseSeries"></span>
<img src="images/PopulationLevelEstimation/selfControlledCaseSeries.png" alt="The Self-Controlled Case Series design. The rate of outcomes during exposure is compared to the rate of outcomes when not exposed." width="90%" />
<p class="caption">
Figure 13.5: The Self-Controlled Case Series design. The rate of outcomes during exposure is compared to the rate of outcomes when not exposed.
</p>
</div>
<p>The Self-Controlled Case Series (SCCS) design <span class="citation">(Farrington <a href="#ref-farrington_1995" role="doc-biblioref">1995</a>; Whitaker et al. <a href="#ref-whitaker_2006" role="doc-biblioref">2006</a>)</span> compares the rate of outcomes during exposure to the rate of outcomes during all unexposed time, including before, between, and after exposures. It is a Poisson regression that is conditioned on the person. Thus, it seeks to answer the question: Given that a patient has the outcome, is the outcome more likely during exposed time compared to non-exposed time?. The choices in Table <a href="PopulationLevelEstimation.html#tab:sccsChoices">13.5</a> define an SCCS question.  </p>
<table>
<caption><span id="tab:sccsChoices">Table 13.5: </span> Main design choices in a self-controlled case series design.</caption>
<colgroup>
<col width="24%" />
<col width="76%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Choice</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Target cohort</td>
<td align="left">A cohort representing the treatment</td>
</tr>
<tr class="even">
<td align="left">Outcome cohort</td>
<td align="left">A cohort representing the outcome of interest</td>
</tr>
<tr class="odd">
<td align="left">Time-at-risk</td>
<td align="left">At what time (often relative to the target cohort start and end dates) do we consider the risk of the outcome?</td>
</tr>
<tr class="even">
<td align="left">Model</td>
<td align="left">The model to estimate the effect, including any adjustments for time-varying confounders</td>
</tr>
</tbody>
</table>
<p>Like other self-controlled designs, the SCCS is robust to confounding due to between-person differences, but vulnerable to confounding due to time-varying effects. Several adjustments are possible to attempt to account for these, for example by including age and season. A special variant of the SCCS includes not just the exposure of interest, but all other exposures to drugs recorded in the database <span class="citation">(Simpson et al. <a href="#ref-simpson_2013" role="doc-biblioref">2013</a>)</span> potentially adding thousands of additional variables to the model. L1-regularization using cross-validation to select the regularization hyperparameter is applied to the coefficients of all exposures except the exposure of interest.</p>
<p>One important assumption underlying the SCCS is that the observation period end is independent of the date of the outcome. For some outcomes, especially ones that can be fatal such as stroke, this assumption can be violated. An extension to the SCCS has been developed that corrects for any such dependency. <span class="citation">(Farrington et al. <a href="#ref-farrington_2011" role="doc-biblioref">2011</a>)</span></p>
</div>
<div id="designing-a-hypertension-study" class="section level2">
<h2><span class="header-section-number">13.6</span> Designing a hypertension study</h2>
<div id="problem-definition-1" class="section level3">
<h3><span class="header-section-number">13.6.1</span> Problem definition</h3>
<p>ACE inhibitors (ACEi) are widely used in patients with hypertension or ischemic heart disease, especially those with other comorbidities such as congestive heart failure, diabetes mellitus, or chronic kidney disease. <span class="citation">(Zaman, Oparil, and Calhoun <a href="#ref-zaman_2002" role="doc-biblioref">2002</a>)</span> Angioedema, a serious and sometimes life-threatening adverse event that usually manifests as swelling of the lips, tongue, mouth, larynx, pharynx, or periorbital region, has been linked to the use of these medications. <span class="citation">(Sabroe and Black <a href="#ref-sabroe_1997" role="doc-biblioref">1997</a>)</span> However, limited information is available about the absolute and relative risks for angioedema associated with the use of these medications. Existing evidence is primarily based on investigations of specific cohorts (e.g., predominantly male veterans or Medicaid beneficiaries) whose findings may not be generalizable to other populations, or based on investigations with few events, which provide unstable risk estimates <span class="citation">(Powers et al. <a href="#ref-powers_2012" role="doc-biblioref">2012</a>)</span>. Several observational studies compare ACEi to beta-blockers for the risk of angioedema, <span class="citation">(Magid et al. <a href="#ref-magid_2010" role="doc-biblioref">2010</a>; Toh et al. <a href="#ref-toh_2012" role="doc-biblioref">2012</a>)</span> but beta-blockers are no longer recommended as first-line treatment of hypertension. <span class="citation">(Whelton et al. <a href="#ref-whelton_2018" role="doc-biblioref">2018</a>)</span> A viable alternative treatment could be thiazides or thiazide-like diuretics (THZ), which could be just as effective in managing hypertension and its associated risks such as acute myocardial infarction (AMI), but without increasing the risk of angioedema.</p>
<p>The following will demonstrate how to apply our population-level estimation framework to observational healthcare data to address the following comparative estimation questions:</p>
<blockquote>
<p>What is the risk of angioedema in new users of ACE inhibitors compared to new users of thiazide and thiazide-like diuretics?</p>
</blockquote>
<blockquote>
<p>What is the risk of acute myocaridal infarction in new users of ACE inhibitors compared to new users of thiazide and thiazide-like diuretics?</p>
</blockquote>
<p>Since these are comparative effect estimation questions we will apply the cohort method as described in Section <a href="PopulationLevelEstimation.html#CohortMethod">13.1</a>.</p>
</div>
<div id="target-and-comparator" class="section level3">
<h3><span class="header-section-number">13.6.2</span> Target and comparator</h3>
<p>We consider patients new-users if their first observed treatment for hypertension was monotherapy with any active ingredient in either the ACEi or THZ class. We define mono therapy as not starting on any other anti-hypertensive drug in the seven days following treatment initiation. We require patients to have at least one year of prior continuous observation in the database before first exposure and a recorded hypertension diagnosis at or in the year preceding treatment initiation.</p>
</div>
<div id="outcome-1" class="section level3">
<h3><span class="header-section-number">13.6.3</span> Outcome</h3>
<p>We define angioedema as any occurrence of an angioedema condition concept during an inpatient or emergency room (ER) visit, and require there to be no angioedema diagnosis recorded in the seven days prior. We define AMI as any occurrence of an AMI condition concept during an inpatient or ER visit, and require there to be no AMI diagnosis record in the 180 days prior.</p>
</div>
<div id="time-at-risk-1" class="section level3">
<h3><span class="header-section-number">13.6.4</span> Time-at-risk</h3>
<p>We define time-at-risk to start on the day after treatment initiation, and stop when exposure stops, allowing for a 30-day gap between subsequent drug exposures.</p>
</div>
<div id="model" class="section level3">
<h3><span class="header-section-number">13.6.5</span> Model</h3>
<p>We fit a PS model using the default set of covariates, including demographics, conditions, drugs, procedures, measurements, observations, and several co-morbidity scores. We exclude ACEi and THZ from the covariates. We perform variable-ratio matching and condition the Cox regression on the matched sets.</p>
</div>
<div id="study-summary" class="section level3">
<h3><span class="header-section-number">13.6.6</span> Study summary</h3>
<table>
<caption><span id="tab:aceChoices">Table 13.6: </span> Main design choices for our comparative cohort study.</caption>
<colgroup>
<col width="24%" />
<col width="76%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Choice</th>
<th align="left">Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Target cohort</td>
<td align="left">New users of ACE inhibitors as first-line monotherapy for hypertension.</td>
</tr>
<tr class="even">
<td align="left">Comparator cohort</td>
<td align="left">New users of thiazides or thiazide-like diuretics as first-line monotherapy for hypertension.</td>
</tr>
<tr class="odd">
<td align="left">Outcome cohort</td>
<td align="left">Angioedema or acute myocardial infarction.</td>
</tr>
<tr class="even">
<td align="left">Time-at-risk</td>
<td align="left">Starting the day after treatment initiation, stopping when exposure stops.</td>
</tr>
<tr class="odd">
<td align="left">Model</td>
<td align="left">Cox proportional hazards model using variable-ratio matching.</td>
</tr>
</tbody>
</table>
</div>
<div id="control-questions" class="section level3">
<h3><span class="header-section-number">13.6.7</span> Control questions</h3>
<p>To evaluate whether our study design produces estimates in line with the truth, we additionally include a set of control questions where the true effect size is known. Control questions can be divided in negative controls, having a hazard ratio of 1, and positive controls, having a known hazard ratio greater than 1. For several reasons we use real negative controls, and synthesize positive controls based on these negative controls. How to define and use control questions is discussed in detail in Chapter <a href="MethodValidity.html#MethodValidity">19</a>.</p>
</div>
</div>
<div id="PleAtlas" class="section level2">
<h2><span class="header-section-number">13.7</span> Implementing the study using ATLAS</h2>
<p>Here we demonstrate how this study can be implemented using the Estimation function in ATLAS. Click on <img src="images/PopulationLevelEstimation/estimation.png" /> in the left bar of ATLAS, and create a new estimation study. Make sure to give the study an easy-to-recognize name. The study design can be saved at any time by clicking the <img src="images/PopulationLevelEstimation/save.png" /> button.</p>
<p>In the Estimation design function, there are three sections: Comparisons, Analysis Settings, and Evaluation Settings. We can specify multiple comparisons and multiple analysis settings, and ATLAS will execute all combinations of these as separate analyses. Here we discuss each section:</p>
<div id="ComparisonSettings" class="section level3">
<h3><span class="header-section-number">13.7.1</span> Comparative cohort settings</h3>
<p>A study can have one or more comparisons. Click on Add Comparison, which will open a new dialog. Click on <img src="images/PopulationLevelEstimation/open.png" /> to select the target and comparator cohorts. By clicking on Add Outcome we can add our two outcome cohorts. We assume the cohorts have already been created in ATLAS as described in Chapter <a href="Cohorts.html#Cohorts">11</a>. The Appendix provides the full definitions of the target (Appendix <a href="CohortDefinitions.html#AceInhibitorsMono">B.2</a>), comparator (Appendix <a href="CohortDefinitions.html#ThiazidesMono">B.5</a>), and outcome (Appendix <a href="CohortDefinitions.html#Angioedema">B.4</a> and Appendix <a href="CohortDefinitions.html#Ami">B.3</a>) cohorts. When done, the dialog should look like Figure <a href="PopulationLevelEstimation.html#fig:comparisons">13.6</a>.</p>
<div class="figure" style="text-align: center"><span id="fig:comparisons"></span>
<img src="images/PopulationLevelEstimation/comparisons.png" alt="The comparison dialog" width="100%" />
<p class="caption">
Figure 13.6: The comparison dialog
</p>
</div>
<p>Note that we can select multiple outcomes for a target-comparator pair. Each outcome will be treated independently, and will result in a separate analysis.</p>
<p><strong>Negative control outcomes</strong></p>
<p>Negative control outcomes are outcomes that are not believed to be caused by either the target or the comparator, and where therefore the true hazard ratio equals 1. Ideally, we would have proper cohort definitions for each outcome cohort. However, typically, we only have a concept set, with one concept per negative control outcome, and some standard logic to turn these into outcome cohorts. Here we assume the concept set has already been created as described in Chapter <a href="MethodValidity.html#MethodValidity">19</a> and can simply be selected. The negative control concept set should contain a concept per negative control, and not include descendants. Figure <a href="PopulationLevelEstimation.html#fig:ncConceptSet">13.7</a> shows the negative control concept set used for this study.</p>
<div class="figure" style="text-align: center"><span id="fig:ncConceptSet"></span>
<img src="images/PopulationLevelEstimation/ncConceptSet.png" alt="Negative Control concept set." width="100%" />
<p class="caption">
Figure 13.7: Negative Control concept set.
</p>
</div>
<p><strong>Concepts to include</strong></p>
<p>When selecting concept to include, we can specify which covariates we would like to generate, for example to use in a propensity model. When specifying covariates here, all other covariates (aside from those you specified) are left out. We usually want to include all baseline covariates, letting the regularized regression build a model that balances all covariates. The only reason we might want to specify particular covariates is to replicate an existing study that manually picked covariates. These inclusions can be specified in this comparison section or in the analysis section, because sometimes they pertain to a specific comparison (e.g.know confounders in a comparison), or sometimes they pertain to an analysis (e.g.when evaluating a particular covariate selection strategy).</p>
<p><strong>Concepts to exclude</strong></p>
<p>Rather than specifying which concepts to include, we can instead specify concepts to <em>exclude</em>. When we submit a concept set in this field, we use every covariate except for those that we submitted. When using the default set of covariates, which includes all drugs and procedures occurring on the day of treatment initiation, we must exclude the target and comparator treatment, as well as any concepts that are directly related to these. For example, if the target exposure is an injectable, we should not only exclude the drug, but also the injection procedure from the propensity model. In this example, the covariates we want to exclude are ACEi and THZ. Figure <a href="PopulationLevelEstimation.html#fig:covsToExclude">13.8</a> shows we select a concept set that includes all these concepts, including their descendants.</p>
<div class="figure" style="text-align: center"><span id="fig:covsToExclude"></span>
<img src="images/PopulationLevelEstimation/covsToExclude.png" alt="The concept set defining the concepts to exclude." width="100%" />
<p class="caption">
Figure 13.8: The concept set defining the concepts to exclude.
</p>
</div>
<p>After selecting the negative controls and covariates to exclude, the lower half of the comparisons dialog should look like Figure <a href="PopulationLevelEstimation.html#fig:comparisons2">13.9</a>.</p>
<div class="figure" style="text-align: center"><span id="fig:comparisons2"></span>
<img src="images/PopulationLevelEstimation/comparisons2.png" alt="The comparison window showing concept sets for negative controls and concepts to exclude." width="100%" />
<p class="caption">
Figure 13.9: The comparison window showing concept sets for negative controls and concepts to exclude.
</p>
</div>
</div>
<div id="effect-estimation-analysis-settings" class="section level3">
<h3><span class="header-section-number">13.7.2</span> Effect estimation analysis settings</h3>
<p>After closing the comparisons dialog we can click on Add Analysis Settings. In the box labeled Analysis Name, we can give the analysis a unique name that is easy to remember and locate in the future. For example, we could set the name to Propensity score matching.</p>
<p><strong>Study population</strong></p>
<p>There are a wide range of options to specify the study population, which is the set of subjects that will enter the analysis. Many of these overlap with options available when designing the target and comparator cohorts in the cohort definition tool. One reason for using the options in Estimation instead of in the cohort definition is re-usability; we can define the target, comparator, and outcome cohorts completely independently, and add dependencies between these at a later point in time. For example, if we wish to remove people who had the outcome before treatment initiation, we could do so in the definitions of the target and comparator cohort, but then we would need to create separate cohorts for every outcome! Instead, we can choose to have people with prior outcomes be removed in the analysis settings, and now we can reuse our target and comparator cohorts for our two outcomes of interest (as well as our negative control outcomes).</p>
<p>The <strong>study start and end dates</strong> can be used to limit the analyses to a specific period. The study end date also truncates risk windows, meaning no outcomes beyond the study end date will be considered. One reason for selecting a study start date might be that one of the drugs being studied is new and did not exist in an earlier time. Automatically adjusting for this can be done by answering yes to the question <strong>Restrict the analysis to the period when both exposures are present in the data?</strong>. Another reason to adjust study start and end dates might be that medical practice changed over time (e.g., due to a drug warning) and we are only interested in the time where medicine was practiced a specific way.</p>
<p>The option <strong>Should only the first exposure per subject be included?</strong> can be used to restrict to the first exposure per patient. Often this is already done in the cohort definition, as is the case in this example. Similarly, the option <strong>The minimum required continuous observation time prior to index date for a person to be included in the cohort</strong> is often already set in the cohort definition, and can therefore be left at 0 here. Having observed time (as defined in the OBSERVATION_PERIOD table) before the index date ensures that there is sufficient information about the patient to calculate a propensity score, and is also often used to ensure the patient is truly a new user, and therefore was not exposed before.</p>
<p><strong>Remove subjects that are in both the target and comparator cohort?</strong> defines, together with the option <strong>If a subject is in multiple cohorts, should time-at-risk be censored when the new time-at-risk starts to prevent overlap?</strong> what happens when a subject is in both target and comparator cohorts. The first setting has three choices:</p>
<ul>
<li><strong>Keep All</strong> indicating to keep the subjects in both cohorts. With this option it might be possible to double-count subjects and outcomes.</li>
<li><strong>Keep First</strong> indicating to keep the subject in the first cohort that occurred.</li>
<li><strong>Remove All</strong> indicating to remove the subject from both cohorts.</li>
</ul>
<p>If the options keep all or keep first are selected, we may wish to censor the time when a person is in both cohorts. This is illustrated in Figure <a href="PopulationLevelEstimation.html#fig:tar">13.10</a>. By default, the time-at-risk is defined relative to the cohort start and end date. In this example, the time-at-risk starts one day after cohort entry, and stops at cohort end. Without censoring the time-at-risk for the two cohorts might overlap. This is especially problematic if we choose to keep all, because any outcome that occurs during this overlap (as shown) will be counted twice. If we choose to censor, the first cohorts time-at-risk ends when the second cohorts time-at-risk starts.</p>
<div class="figure" style="text-align: center"><span id="fig:tar"></span>
<img src="images/PopulationLevelEstimation/tar.png" alt="Time-at-risk (TAR) for subjects who are in both cohorts, assuming time-at-risk starts the day after treatment initiation, and stops at exposure end." width="80%" />
<p class="caption">
Figure 13.10: Time-at-risk (TAR) for subjects who are in both cohorts, assuming time-at-risk starts the day after treatment initiation, and stops at exposure end.
</p>
</div>
<p>We can choose to <strong>remove subjects that have the outcome prior to the risk window start</strong>, because often a second outcome occurrence is the continuation of the first one. For instance, when someone develops heart failure, a second occurrence is likely, which means the heart failure probably never fully resolved in between. On the other hand, some outcomes are episodic, and it would be expected for patients to have more than one independent occurrence, like an upper respiratory infection. If we choose to remove people that had the outcome before, we can select <strong>how many days we should look back when identifying prior outcomes</strong>.</p>
<p>Our choices for our example study are shown in Figure <a href="PopulationLevelEstimation.html#fig:studyPopulation">13.11</a>. Because our target and comparator cohort definitions already restrict to the first exposure and require observation time prior to treatment initiation, we do not apply these criteria here.</p>
<div class="figure" style="text-align: center"><span id="fig:studyPopulation"></span>
<img src="images/PopulationLevelEstimation/studyPopulation.png" alt="Study population settings." width="100%" />
<p class="caption">
Figure 13.11: Study population settings.
</p>
</div>
<p><strong>Covariate settings</strong></p>
<p>Here we specify the covariates to construct. These covariates are typically used in the propensity model, but can also be included in the outcome model (the Cox proporitional hazards model in this case). If we <strong>click to view details</strong> of our covariate settings, we can select which sets of covariates to construct. However, the recommendation is to use the default set, which constructs covariates for demographics, all conditions, drugs, procedures, measurements, etc.</p>
<p>We can modify the set of covariates by specifying concepts to <strong>include</strong> and/or <strong>exclude</strong>. These settings are the same as the ones found in Section <a href="PopulationLevelEstimation.html#ComparisonSettings">13.7.1</a> on comparison settings. The reason why they can be found in two places is because sometimes these settings are related to a specific comparison, as is the case here because we wish to exclude the drugs we are comparing, and sometimes the settings are related to a specific analysis. When executing an analysis for a specific comparison using specific analysis settings, the OHDSI tools will take the union of these sets.</p>
<p>Figure <a href="PopulationLevelEstimation.html#fig:covariateSettings">13.12</a> shows our choices for this study. Note that we have selected to add descendants to the concept to exclude, which we defined in the comparison settings in Figure <a href="PopulationLevelEstimation.html#fig:comparisons2">13.9</a>.</p>
<div class="figure" style="text-align: center"><span id="fig:covariateSettings"></span>
<img src="images/PopulationLevelEstimation/covariateSettings.png" alt="Covariate settings." width="100%" />
<p class="caption">
Figure 13.12: Covariate settings.
</p>
</div>
<p><strong>Time at risk</strong></p>
<p>Time-at-risk is defined relative to the start and end dates of our target and comparator cohorts. In our example, we had set the cohort start date to start on treatment initiation, and cohort end date when exposure stops (for at least 30 days). We set the start of time-at-risk to one day after cohort start, so one day after treatment initiation. A reason to set the time-at-risk start to be later than the cohort start is because we may want to exclude outcome events that occur on the day of treatment initiation if we do not believe it biologically plausible they can be caused by the drug.</p>
<p>We set the end of the time-at-risk to the cohort end, so when exposure stops. We could choose to set the end date later if for example we believe events closely following treatment end may still be attributable to the exposure. In the extreme we could set the time-at-risk end to a large number of days (e.g.99999) after the cohort end date, meaning we will effectively follow up subjects until observation end. Such a design is sometimes referred to as an <em>intent-to-treat</em> design.</p>
<p>A patient with zero days at risk adds no information, so the <strong>minimum days at risk</strong> is normally set at one day. If there is a known latency for the side effect, then this may be increased to get a more informative proportion. It can also be used to create a cohort more similar to that of a randomized trial it is being compared to (e.g., all the patients in the randomized trial were observed for at least N days).</p>

<div class="rmdimportant">
A golden rule in designing a cohort study is to never use information that falls after the cohort start date to define the study population, as this may introduce bias. For example, if we require everyone to have at least a year of time-at-risk, we will likely have limited our analyses to those who tolerate the treatment well. This setting should therefore be used with extreme care.
</div>

<div class="figure" style="text-align: center"><span id="fig:timeAtRisk"></span>
<img src="images/PopulationLevelEstimation/timeAtRisk.png" alt="Time-at-risk settings." width="100%" />
<p class="caption">
Figure 13.13: Time-at-risk settings.
</p>
</div>
<p><strong>Propensity score adjustment</strong></p>
<p>We can opt to <strong>trim</strong> the study population, removing people with extreme PS values. We can choose to remove the top and bottom percentage, or we can remove subjects whose preference score falls outside the range we specify. Trimming the cohorts is generally not recommended because it requires discarding observations, which reduces statistical power. It may be desirable to trim in some cases, for example when using IPTW. </p>
<p>In addition to, or instead of trimming, we can choose to <strong>stratify</strong> or <strong>match</strong> on the propensity score. When stratifying we need to specify the <strong>number of strata</strong> and whether to select the strata based on the target, comparator, or entire study population. When matching we need to specify the <strong>maximum number of people from the comparator group to match to each person in the target group</strong>. Typical values are 1 for one-on-one matching, or a large number (e.g.100) for variable-ratio matching. We also need to specify the <strong>caliper</strong>: the maximum allowed difference between propensity scores to allow a match. The caliper can be defined on difference <strong>caliper scales</strong>: </p>
<ul>
<li><strong>The propensity score scale</strong>: the PS itself</li>
<li><strong>The standardized scale</strong>: in standard deviations of the PS distributions</li>
<li><strong>The standardized logit scale</strong>: in standard deviations of the PS distributions after the logit transformation to make the PS more normally distributed.</li>
</ul>
<p>In case of doubt, we suggest using the default values, or consult the work on this topic by <span class="citation">Austin (<a href="#ref-austin_2011" role="doc-biblioref">2011</a>)</span>.</p>
<p>Fitting large-scale propensity models can be computationally expensive, so we may want to restrict the data used to fit the model to just a sample of the data. By default the maximum size of the target and comparator cohort is set to 250,000. In most studies this limit will not be reached. It is also unlikely that more data will lead to a better model. Note that although a sample of the data may be used to fit the model, the model will be used to compute PS for the entire population.</p>
<p><strong>Test each covariate for correlation with the target assignment?</strong> If any covariate has an unusually high correlation (either positive or negative), this will throw an error. This avoids lengthy calculation of a propensity model only to discover complete separation. Finding very high univariate correlation allows you to review the covariate to determine why it has high correlation and whether it should be dropped.</p>
<p><strong>Use regularization when fitting the model?</strong> The standard procedure is to include many covariates (typically more than 10,000) in the propensity model. In order to fit such models some regularization is required. If only a few hand-picked covariates are included, it is also possible to fit the model without regularization.</p>
<p>Figure <a href="PopulationLevelEstimation.html#fig:psSettings">13.14</a> shows our choices for this study. Note that we select variable-ratio matching by setting the maximum number of people to match to 100.</p>
<div class="figure" style="text-align: center"><span id="fig:psSettings"></span>
<img src="images/PopulationLevelEstimation/psSettings.png" alt="Propensity score adjustment settings." width="100%" />
<p class="caption">
Figure 13.14: Propensity score adjustment settings.
</p>
</div>
<p><strong>Outcome model settings</strong></p>
<p>First, we need to <strong>specify the statistical model we will use to estimate the relative risk of the outcome between target and comparator cohorts</strong>. We can choose between Cox, Poisson, and logistic regression, as discussed briefly in Section <a href="PopulationLevelEstimation.html#CohortMethod">13.1</a>. For our example we choose a Cox proportional hazards model, which considers time to first event with possible censoring. Next, we need to specify <strong>whether the regression should be conditioned on the strata</strong>. One way to understand conditioning is to imagine a separate estimate is produced in each stratum, and then combined across strata. For one-to-one matching this is likely unnecessary and would just lose power. For stratification or variable-ratio matching it is required.  </p>
<p>We can also choose to <strong>add the covariates to the outcome model</strong> to adjust the analysis. This can be done in addition or instead of using a propensity model. However, whereas there usually is ample data to fit a propensity model, with many people in both treatment groups, there is typically very little data to fit the outcome model, with only few people having the outcome. We therefore recommend keeping the outcome model as simple as possible and not include additional covariates.</p>
<p>Instead of stratifying or matching on the propensity score we can also choose to <strong>use inverse probability of treatment weighting</strong> (IPTW). If weighting is used it is often recommended to use some form of trimming to avoid extreme weights and therefore unstable estimates.</p>
<p>If we choose to include all covariates in the outcome model, it may make sense to use regularization when fitting the model if there are many covariates. Note that no regularization will be applied to the treatment variable to allow for unbiased estimation.</p>
<p>Figure <a href="PopulationLevelEstimation.html#fig:outcomeModelSettings">13.15</a> shows our choices for this study. Because we use variable-ratio matching, we must condition the regression on the strata (i.e.the matched sets).</p>
<div class="figure" style="text-align: center"><span id="fig:outcomeModelSettings"></span>
<img src="images/PopulationLevelEstimation/outcomeModelSettings.png" alt="Outcome model settings." width="100%" />
<p class="caption">
Figure 13.15: Outcome model settings.
</p>
</div>
</div>
<div id="evaluationSettings" class="section level3">
<h3><span class="header-section-number">13.7.3</span> Evaluation settings</h3>
<p>As described in Chapter <a href="MethodValidity.html#MethodValidity">19</a>, negative and positive controls should be included in our study to evaluate the operating characteristics, and perform empirical calibration.</p>
<p><strong>Negative control outcome cohort definition</strong></p>
<p>In Section <a href="PopulationLevelEstimation.html#ComparisonSettings">13.7.1</a> we selected a concept set representing the negative control outcomes. However, we need logic to convert concepts to cohorts to be used as outcomes in our analysis. ATLAS provides standard logic with three choices. The first choice is whether to <strong>use all occurrences</strong> or just the <strong>first occurrence</strong> of the concept. The second choice determines <strong>whether occurrences of descendant concepts should be considered</strong>. For example, occurrences of the descendant ingrown nail of foot can also be counted as an occurrence of the ancestor ingrown nail. The third choice specifies which domains should be considered when looking for the concepts.</p>
<div class="figure" style="text-align: center"><span id="fig:ncSettings"></span>
<img src="images/PopulationLevelEstimation/ncSettings.png" alt="Negative control outcome cohort definition settings." width="100%" />
<p class="caption">
Figure 13.16: Negative control outcome cohort definition settings.
</p>
</div>
<p><strong>Positive control synthesis</strong></p>
<p>In addition to negative controls we can also include positive controls, which are exposure-outcome pairs where a causal effect is believed to exist with known effect size. For various reasons real positive controls are problematic, so instead we rely on synthetic positive controls, derived from negative controls as described in Chapter <a href="MethodValidity.html#MethodValidity">19</a>. We can choose to <strong>perform positive control synthesis</strong>. If yes, we must choose the <strong>model type</strong>, currently being Poisson and surival. Since we use a survival (Cox) model in our estimation study, we should choose survival. We define the time-at-risk model for the positive control synthesis to be the same as in our estimation settings, and similarly mimic the choices for the <strong>minimum required continuous observation prior to exposure</strong>, <strong>should only the first exposure be included</strong>, <strong>should only the first outcome be included</strong>, as well as <strong>remove people with prior outcomes</strong>. Figure <a href="PopulationLevelEstimation.html#fig:outcomeModelSettings">13.15</a> shows the settings for the positive control synthesis.</p>
<div class="figure" style="text-align: center"><span id="fig:pcSynthesis"></span>
<img src="images/PopulationLevelEstimation/pcSynthesis.png" alt="Negative control outcome cohort definition settings." width="100%" />
<p class="caption">
Figure 13.17: Negative control outcome cohort definition settings.
</p>
</div>
</div>
<div id="running-the-study-package" class="section level3">
<h3><span class="header-section-number">13.7.4</span> Running the study package</h3>
<p>Now that we have fully defined our study, we can export it as an executable R package. This package contains everything that is needed to execute the study at a site that has data in CDM. This includes the cohort definitions that can be used to instantiate the target, comparator and outcome cohorts, the negative control concept set and logic to create the negative control outcome cohorts, as well as the R code to execute the analysis. Before generating the package make sure to save your study, then click on the <strong>Utilities</strong> tab. Here we can review the set of analyses that will be performed. As mentioned before, every combination of a comparison and an analysis setting will result in a separate analysis. In our example we have specified two analyses: ACEi versus THZ for AMI, and ACEi versus THZ for angioedema, both using propensity score matching.</p>
<p>We must provide a name for our package, after which we can click on Download to download the zip file. The zip file contains an R package, with the usual required folder structure for R packages. <span class="citation">(Wickham <a href="#ref-Wickham_2015" role="doc-biblioref">2015</a>)</span> To use this package we recommend using R Studio. If you are running R Studio locally, unzip the file, and double click the .Rproj file to open it in R Studio. If you are running R Studio on an R studio server, click <img src="images/PopulationLevelEstimation/upload.png" /> to upload and unzip the file, then click on the .Rproj file to open the project.</p>
<p>Once you have opened the project in R Studio, you can open the README file, and follow the instructions. Make sure to change all file paths to existing paths on your system.</p>
<p>A common error message that may appear when running the study is High correlation between covariate(s) and treatment detected. This indicates that when fitting the propensity model, some covariates were observed to be highly correlated with the exposure. Please review the covariates mentioned in the error message, and exclude them from the set of covariates if appropriate (see Section <a href="PopulationLevelEstimation.html#VariableSelection">13.1.2</a>). </p>
</div>
</div>
<div id="pleR" class="section level2">
<h2><span class="header-section-number">13.8</span> Implementing the study using R</h2>
<p>Instead of using ATLAS to write the R code that executes the study, we can also write the R code ourselves. One reason we might want to do this is because R offers far greater flexibility than is exposed in ATLAS. If we for example wish to use custom covariates, or a linear outcome model, we will need to write some custom R code, and combine it with the functionality provided by the OHDSI R packages.</p>
<p>For our example study we will rely on the <a href="https://ohdsi.github.io/CohortMethod/">CohortMethod</a> package to execute our study. CohortMethod extracts the necessary data from a database in the CDM and can use a large set of covariates for the propensity model. In the following example we first only consider angioedema as outcome. In Section <a href="PopulationLevelEstimation.html#MultipleAnalyses">13.8.6</a> we then describe how this can be extended to include AMI and the negative control outcomes.</p>
<div id="cohort-instantiation-1" class="section level3">
<h3><span class="header-section-number">13.8.1</span> Cohort instantiation</h3>
<p>We first need to instantiate the target and outcome cohorts. Instantiating cohorts is described in Chapter <a href="Cohorts.html#Cohorts">11</a>. The Appendix provides the full definitions of the target (Appendix <a href="CohortDefinitions.html#AceInhibitorsMono">B.2</a>), comparator (Appendix <a href="CohortDefinitions.html#ThiazidesMono">B.5</a>), and outcome (Appendix <a href="CohortDefinitions.html#Angioedema">B.4</a> ) cohorts. We will assume the ACEi, THZ, and angioedema cohorts have been instantiated in a table called <code>scratch.my_cohorts</code> with cohort definition IDs 1, 2, and 3 respectively.</p>
</div>
<div id="data-extraction-1" class="section level3">
<h3><span class="header-section-number">13.8.2</span> Data extraction</h3>
<p>We first need to tell R how to connect to the server. <a href="https://ohdsi.github.io/CohortMethod/">CohortMethod</a> uses the <a href="https://ohdsi.github.io/DatabaseConnector/">DatabaseConnector</a> package, which provides a function called <code>createConnectionDetails</code>. Type <code>?createConnectionDetails</code> for the specific settings required for the various database management systems (DBMS). For example, one might connect to a PostgreSQL database using this code:</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="PopulationLevelEstimation.html#cb85-1"></a><span class="kw">library</span>(CohortMethod)</span>
<span id="cb85-2"><a href="PopulationLevelEstimation.html#cb85-2"></a>connDetails &lt;-<span class="st"> </span><span class="kw">createConnectionDetails</span>(<span class="dt">dbms =</span> <span class="st">&quot;postgresql&quot;</span>,</span>
<span id="cb85-3"><a href="PopulationLevelEstimation.html#cb85-3"></a>                                       <span class="dt">server =</span> <span class="st">&quot;localhost/ohdsi&quot;</span>,</span>
<span id="cb85-4"><a href="PopulationLevelEstimation.html#cb85-4"></a>                                       <span class="dt">user =</span> <span class="st">&quot;joe&quot;</span>,</span>
<span id="cb85-5"><a href="PopulationLevelEstimation.html#cb85-5"></a>                                       <span class="dt">password =</span> <span class="st">&quot;supersecret&quot;</span>)</span>
<span id="cb85-6"><a href="PopulationLevelEstimation.html#cb85-6"></a></span>
<span id="cb85-7"><a href="PopulationLevelEstimation.html#cb85-7"></a>cdmDbSchema &lt;-<span class="st"> &quot;my_cdm_data&quot;</span></span>
<span id="cb85-8"><a href="PopulationLevelEstimation.html#cb85-8"></a>cohortDbSchema &lt;-<span class="st"> &quot;scratch&quot;</span></span>
<span id="cb85-9"><a href="PopulationLevelEstimation.html#cb85-9"></a>cohortTable &lt;-<span class="st"> &quot;my_cohorts&quot;</span></span>
<span id="cb85-10"><a href="PopulationLevelEstimation.html#cb85-10"></a>cdmVersion &lt;-<span class="st"> &quot;5&quot;</span></span></code></pre></div>
<p>The last four lines define the <code>cdmDbSchema</code>, <code>cohortDbSchema</code>, and <code>cohortTable</code> variables, as well as the CDM version. We will use these later to tell R where the data in CDM format live, where the cohorts of interest have been created, and what version CDM is used. Note that for Microsoft SQL Server, database schemas need to specify both the database and the schema, so for example <code>cdmDbSchema &lt;- "my_cdm_data.dbo"</code>.</p>
<p>Now we can tell CohortMethod to extract the cohorts, construct covariates, and extract all necessary data for our analysis:</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="PopulationLevelEstimation.html#cb86-1"></a><span class="co"># target and comparator ingredient concepts:</span></span>
<span id="cb86-2"><a href="PopulationLevelEstimation.html#cb86-2"></a>aceI &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1335471</span>,<span class="dv">1340128</span>,<span class="dv">1341927</span>,<span class="dv">1363749</span>,<span class="dv">1308216</span>,<span class="dv">1310756</span>,<span class="dv">1373225</span>,</span>
<span id="cb86-3"><a href="PopulationLevelEstimation.html#cb86-3"></a>          <span class="dv">1331235</span>,<span class="dv">1334456</span>,<span class="dv">1342439</span>)</span>
<span id="cb86-4"><a href="PopulationLevelEstimation.html#cb86-4"></a>thz &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1395058</span>,<span class="dv">974166</span>,<span class="dv">978555</span>,<span class="dv">907013</span>)</span>
<span id="cb86-5"><a href="PopulationLevelEstimation.html#cb86-5"></a></span>
<span id="cb86-6"><a href="PopulationLevelEstimation.html#cb86-6"></a><span class="co"># Define which types of covariates must be constructed:</span></span>
<span id="cb86-7"><a href="PopulationLevelEstimation.html#cb86-7"></a>cs &lt;-<span class="st"> </span><span class="kw">createDefaultCovariateSettings</span>(<span class="dt">excludedCovariateConceptIds =</span> <span class="kw">c</span>(aceI,</span>
<span id="cb86-8"><a href="PopulationLevelEstimation.html#cb86-8"></a>                                                                     thz),</span>
<span id="cb86-9"><a href="PopulationLevelEstimation.html#cb86-9"></a>                                     <span class="dt">addDescendantsToExclude =</span> <span class="ot">TRUE</span>)</span>
<span id="cb86-10"><a href="PopulationLevelEstimation.html#cb86-10"></a></span>
<span id="cb86-11"><a href="PopulationLevelEstimation.html#cb86-11"></a><span class="co">#Load data:</span></span>
<span id="cb86-12"><a href="PopulationLevelEstimation.html#cb86-12"></a>cmData &lt;-<span class="st"> </span><span class="kw">getDbCohortMethodData</span>(<span class="dt">connectionDetails =</span> connectionDetails,</span>
<span id="cb86-13"><a href="PopulationLevelEstimation.html#cb86-13"></a>                                <span class="dt">cdmDatabaseSchema =</span> cdmDatabaseSchema,</span>
<span id="cb86-14"><a href="PopulationLevelEstimation.html#cb86-14"></a>                                <span class="dt">oracleTempSchema =</span> <span class="ot">NULL</span>,</span>
<span id="cb86-15"><a href="PopulationLevelEstimation.html#cb86-15"></a>                                <span class="dt">targetId =</span> <span class="dv">1</span>,</span>
<span id="cb86-16"><a href="PopulationLevelEstimation.html#cb86-16"></a>                                <span class="dt">comparatorId =</span> <span class="dv">2</span>,</span>
<span id="cb86-17"><a href="PopulationLevelEstimation.html#cb86-17"></a>                                <span class="dt">outcomeIds =</span> <span class="dv">3</span>,</span>
<span id="cb86-18"><a href="PopulationLevelEstimation.html#cb86-18"></a>                                <span class="dt">studyStartDate =</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb86-19"><a href="PopulationLevelEstimation.html#cb86-19"></a>                                <span class="dt">studyEndDate =</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb86-20"><a href="PopulationLevelEstimation.html#cb86-20"></a>                                <span class="dt">exposureDatabaseSchema =</span> cohortDbSchema,</span>
<span id="cb86-21"><a href="PopulationLevelEstimation.html#cb86-21"></a>                                <span class="dt">exposureTable =</span> cohortTable,</span>
<span id="cb86-22"><a href="PopulationLevelEstimation.html#cb86-22"></a>                                <span class="dt">outcomeDatabaseSchema =</span> cohortDbSchema,</span>
<span id="cb86-23"><a href="PopulationLevelEstimation.html#cb86-23"></a>                                <span class="dt">outcomeTable =</span> cohortTable,</span>
<span id="cb86-24"><a href="PopulationLevelEstimation.html#cb86-24"></a>                                <span class="dt">cdmVersion =</span> cdmVersion,</span>
<span id="cb86-25"><a href="PopulationLevelEstimation.html#cb86-25"></a>                                <span class="dt">firstExposureOnly =</span> <span class="ot">FALSE</span>,</span>
<span id="cb86-26"><a href="PopulationLevelEstimation.html#cb86-26"></a>                                <span class="dt">removeDuplicateSubjects =</span> <span class="ot">FALSE</span>,</span>
<span id="cb86-27"><a href="PopulationLevelEstimation.html#cb86-27"></a>                                <span class="dt">restrictToCommonPeriod =</span> <span class="ot">FALSE</span>,</span>
<span id="cb86-28"><a href="PopulationLevelEstimation.html#cb86-28"></a>                                <span class="dt">washoutPeriod =</span> <span class="dv">0</span>,</span>
<span id="cb86-29"><a href="PopulationLevelEstimation.html#cb86-29"></a>                                <span class="dt">covariateSettings =</span> cs)</span>
<span id="cb86-30"><a href="PopulationLevelEstimation.html#cb86-30"></a>cmData</span></code></pre></div>
<pre><code>## CohortMethodData object
## 
## Treatment concept ID: 1
## Comparator concept ID: 2
## Outcome concept ID(s): 3</code></pre>
<p>There are many parameters, but they are all documented in the <a href="https://ohdsi.github.io/CohortMethod/reference/">CohortMethod manual</a>. The <code>createDefaultCovariateSettings</code> function is described in the <a href="https://ohdsi.github.io/FeatureExtraction/">FeatureExtraction</a> package. In short, we are pointing the function to the table containing our cohorts and specify which cohort definition IDs in that table identify the target, comparator and outcome. We instruct that the default set of covariates should be constructed, including covariates for all conditions, drug exposures, and procedures that were found on or before the index date. As mentioned in Section <a href="PopulationLevelEstimation.html#CohortMethod">13.1</a> we must exclude the target and comparator treatments from the set of covariates, and here we achieve this by listing all ingredients in the two classes, and tell FeatureExtraction to also exclude all descendants, thus excluding all drugs that contain these ingredients.</p>
<p>All data about the cohorts, outcomes, and covariates are extracted from the server and stored in the <code>cohortMethodData</code> object. This object uses the package <code>ff</code> to store information in a way that ensures R does not run out of memory, even when the data are large, as mentioned in Section <a href="OhdsiAnalyticsTools.html#BigDataSupport">9.4.2</a>.</p>
<p>We can use the generic <code>summary()</code> function to view some more information of the data we extracted:</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="PopulationLevelEstimation.html#cb88-1"></a><span class="kw">summary</span>(cmData)</span></code></pre></div>
<pre><code>## CohortMethodData object summary
## 
## Treatment concept ID: 1
## Comparator concept ID: 2
## Outcome concept ID(s): 3
## 
## Treated persons: 67166
## Comparator persons: 35333
## 
## Outcome counts:
##          Event count Person count
## 3               980          891
## 
## Covariates:
## Number of covariates: 58349
## Number of non-zero covariate values: 24484665</code></pre>
<p>Creating the <code>cohortMethodData</code> file can take considerable computing time, and it is probably a good idea to save it for future sessions. Because <code>cohortMethodData</code> uses <code>ff</code>, we cannot use Rs regular save function. Instead, well have to use the <code>saveCohortMethodData()</code> function:</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="PopulationLevelEstimation.html#cb90-1"></a><span class="kw">saveCohortMethodData</span>(cmData, <span class="st">&quot;AceiVsThzForAngioedema&quot;</span>)</span></code></pre></div>
<p>We can use the <code>loadCohortMethodData()</code> function to load the data in a future session.</p>
<p><strong>Defining new users</strong></p>
<p>Typically, a new user is defined as first time use of a drug (either target or comparator), and typically a washout period (a minimum number of days prior to first use) is used to increase the probability that it is truly first use. When using the CohortMethod package, you can enforce the necessary requirements for new use in three ways:</p>
<ol style="list-style-type: decimal">
<li>When defining the cohorts.</li>
<li>When loading the cohorts using the <code>getDbCohortMethodData</code> function, you can use the <code>firstExposureOnly</code>, <code>removeDuplicateSubjects</code>, <code>restrictToCommonPeriod</code>, and <code>washoutPeriod</code> arguments.</li>
<li>When defining the study population using the <code>createStudyPopulation</code> function (see below).</li>
</ol>
<p>The advantage of option 1 is that the input cohorts are already fully defined outside of the CohortMethod package, and external cohort characterization tools can be used on the same cohorts used in this analysis. The advantage of options 2 and 3 is that they save you the trouble of limiting to first use yourself, for example allowing you to directly use the DRUG_ERA table in the CDM. Option 2 is more efficient than 3, since only data for first use will be fetched, while option 3 is less efficient but allows you to compare the original cohorts to the study population.</p>
</div>
<div id="defining-the-study-population" class="section level3">
<h3><span class="header-section-number">13.8.3</span> Defining the study population</h3>
<p>Typically, the exposure cohorts and outcome cohorts will be defined independently of each other. When we want to produce an effect size estimate, we need to further restrict these cohorts and put them together, for example by removing exposed subjects that had the outcome prior to exposure, and only keeping outcomes that fall within a defined risk window. For this we can use the <code>createStudyPopulation</code> function:</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="PopulationLevelEstimation.html#cb91-1"></a>studyPop &lt;-<span class="st"> </span><span class="kw">createStudyPopulation</span>(<span class="dt">cohortMethodData =</span> cmData,</span>
<span id="cb91-2"><a href="PopulationLevelEstimation.html#cb91-2"></a>                                  <span class="dt">outcomeId =</span> <span class="dv">3</span>,</span>
<span id="cb91-3"><a href="PopulationLevelEstimation.html#cb91-3"></a>                                  <span class="dt">firstExposureOnly =</span> <span class="ot">FALSE</span>,</span>
<span id="cb91-4"><a href="PopulationLevelEstimation.html#cb91-4"></a>                                  <span class="dt">restrictToCommonPeriod =</span> <span class="ot">FALSE</span>,</span>
<span id="cb91-5"><a href="PopulationLevelEstimation.html#cb91-5"></a>                                  <span class="dt">washoutPeriod =</span> <span class="dv">0</span>,</span>
<span id="cb91-6"><a href="PopulationLevelEstimation.html#cb91-6"></a>                                  <span class="dt">removeDuplicateSubjects =</span> <span class="st">&quot;remove all&quot;</span>,</span>
<span id="cb91-7"><a href="PopulationLevelEstimation.html#cb91-7"></a>                                  <span class="dt">removeSubjectsWithPriorOutcome =</span> <span class="ot">TRUE</span>,</span>
<span id="cb91-8"><a href="PopulationLevelEstimation.html#cb91-8"></a>                                  <span class="dt">minDaysAtRisk =</span> <span class="dv">1</span>,</span>
<span id="cb91-9"><a href="PopulationLevelEstimation.html#cb91-9"></a>                                  <span class="dt">riskWindowStart =</span> <span class="dv">1</span>,</span>
<span id="cb91-10"><a href="PopulationLevelEstimation.html#cb91-10"></a>                                  <span class="dt">startAnchor =</span> <span class="st">&quot;cohort start&quot;</span>,</span>
<span id="cb91-11"><a href="PopulationLevelEstimation.html#cb91-11"></a>                                  <span class="dt">riskWindowEnd =</span> <span class="dv">0</span>,</span>
<span id="cb91-12"><a href="PopulationLevelEstimation.html#cb91-12"></a>                                  <span class="dt">endAnchor =</span> <span class="st">&quot;cohort end&quot;</span>)</span></code></pre></div>
<p>Note that weve set <code>firstExposureOnly</code> and <code>removeDuplicateSubjects</code> to FALSE, and <code>washoutPeriod</code> to 0 because we already applied those criteria in the cohort definitions. We specify the outcome ID we will use, and that people with outcomes prior to the risk window start date will be removed. The risk window is defined as starting on the day after the cohort start date (<code>riskWindowStart = 1</code> and <code>startAnchor = "cohort start"</code>), and the risk windows ends when the cohort exposure ends (<code>riskWindowEnd = 0</code> and <code>endAnchor = "cohort end"</code>), which was defined as the end of exposure in the cohort definition. Note that the risk windows are automatically truncated at the end of observation or the study end date. We also remove subjects who have no time at risk. To see how many people are left in the study population we can always use the <code>getAttritionTable</code> function:</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="PopulationLevelEstimation.html#cb92-1"></a><span class="kw">getAttritionTable</span>(studyPop)</span></code></pre></div>
<pre><code>##                    description targetPersons comparatorPersons   ...
## 1             Original cohorts         67212             35379   ...
## 2 Removed subs in both cohorts         67166             35333   ...
## 3             No prior outcome         67061             35238   ...
## 4 Have at least 1 days at risk         66780             35086   ...</code></pre>
</div>
<div id="propensity-scores-1" class="section level3">
<h3><span class="header-section-number">13.8.4</span> Propensity scores</h3>
<p>We can fit a propensity model using the covariates constructed by the <code>getDbcohortMethodData()</code> function, and compute a PS for each person:</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="PopulationLevelEstimation.html#cb94-1"></a>ps &lt;-<span class="st"> </span><span class="kw">createPs</span>(<span class="dt">cohortMethodData =</span> cmData, <span class="dt">population =</span> studyPop)</span></code></pre></div>
<p>The <code>createPs</code> function uses the <a href="https://ohdsi.github.io/Cyclops/">Cyclops</a> package to fit a large-scale regularized logistic regression. To fit the propensity model, Cyclops needs to know the hyperparameter value which specifies the variance of the prior. By default Cyclops will use cross-validation to estimate the optimal hyperparameter. However, be aware that this can take a really long time. You can use the <code>prior</code> and <code>control</code> parameters of the <code>createPs</code> function to specify Cyclops behavior, including using multiple CPUs to speed-up the cross-validation.</p>
<p>Here we use the PS to perform variable-ratio matching:</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="PopulationLevelEstimation.html#cb95-1"></a>matchedPop &lt;-<span class="st"> </span><span class="kw">matchOnPs</span>(<span class="dt">population =</span> ps, <span class="dt">caliper =</span> <span class="fl">0.2</span>,</span>
<span id="cb95-2"><a href="PopulationLevelEstimation.html#cb95-2"></a>                        <span class="dt">caliperScale =</span> <span class="st">&quot;standardized logit&quot;</span>, <span class="dt">maxRatio =</span> <span class="dv">100</span>)</span></code></pre></div>
<p>Alternatively, we could have used the PS in the <code>trimByPs</code>, <code>trimByPsToEquipoise</code>, or <code>stratifyByPs</code> functions.</p>
</div>
<div id="outcome-models" class="section level3">
<h3><span class="header-section-number">13.8.5</span> Outcome models</h3>
<p>The outcome model is a model describing which variables are associated with the outcome. Under strict assumptions, the coefficient for the treatment variable can be interpreted as the causal effect. In this case we fit a Cox proportional hazards model, conditioned (stratified) on the matched sets:</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="PopulationLevelEstimation.html#cb96-1"></a>outcomeModel &lt;-<span class="st"> </span><span class="kw">fitOutcomeModel</span>(<span class="dt">population =</span> matchedPop,</span>
<span id="cb96-2"><a href="PopulationLevelEstimation.html#cb96-2"></a>                                <span class="dt">modelType =</span> <span class="st">&quot;cox&quot;</span>,</span>
<span id="cb96-3"><a href="PopulationLevelEstimation.html#cb96-3"></a>                                <span class="dt">stratified =</span> <span class="ot">TRUE</span>)</span>
<span id="cb96-4"><a href="PopulationLevelEstimation.html#cb96-4"></a>outcomeModel</span></code></pre></div>
<pre><code>## Model type: cox
## Stratified: TRUE
## Use covariates: FALSE
## Use inverse probability of treatment weighting: FALSE
## Status: OK
## 
##           Estimate lower .95 upper .95   logRr seLogRr
## treatment   4.3203    2.4531    8.0771 1.4633   0.304</code></pre>
</div>
<div id="MultipleAnalyses" class="section level3">
<h3><span class="header-section-number">13.8.6</span> Running multiple analyses</h3>
<p>Often we want to perform more than one analysis, for example for multiple outcomes including negative controls. The <a href="https://ohdsi.github.io/CohortMethod/">CohortMethod</a> offers functions for performing such studies efficiently. This is described in detail in the <a href="https://ohdsi.github.io/CohortMethod/articles/MultipleAnalyses.html">package vignette on running multiple analyses</a>. Briefly, assuming the outcome of interest and negative control cohorts have already been created, we can specify all target-comparator-outcome combinations we wish to analyze:</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="PopulationLevelEstimation.html#cb98-1"></a><span class="co"># Outcomes of interest:</span></span>
<span id="cb98-2"><a href="PopulationLevelEstimation.html#cb98-2"></a>ois &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">3</span>, <span class="dv">4</span>) <span class="co"># Angioedema, AMI</span></span>
<span id="cb98-3"><a href="PopulationLevelEstimation.html#cb98-3"></a></span>
<span id="cb98-4"><a href="PopulationLevelEstimation.html#cb98-4"></a><span class="co"># Negative controls:</span></span>
<span id="cb98-5"><a href="PopulationLevelEstimation.html#cb98-5"></a>ncs &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">434165</span>,<span class="dv">436409</span>,<span class="dv">199192</span>,<span class="dv">4088290</span>,<span class="dv">4092879</span>,<span class="dv">44783954</span>,<span class="dv">75911</span>,<span class="dv">137951</span>,<span class="dv">77965</span>,</span>
<span id="cb98-6"><a href="PopulationLevelEstimation.html#cb98-6"></a>         <span class="dv">376707</span>,<span class="dv">4103640</span>,<span class="dv">73241</span>,<span class="dv">133655</span>,<span class="dv">73560</span>,<span class="dv">434327</span>,<span class="dv">4213540</span>,<span class="dv">140842</span>,<span class="dv">81378</span>,<span class="dv">432303</span>,</span>
<span id="cb98-7"><a href="PopulationLevelEstimation.html#cb98-7"></a>         <span class="dv">4201390</span>,<span class="dv">46269889</span>,<span class="dv">134438</span>,<span class="dv">78619</span>,<span class="dv">201606</span>,<span class="dv">76786</span>,<span class="dv">4115402</span>,<span class="dv">45757370</span>,<span class="dv">433111</span></span>
<span id="cb98-8"><a href="PopulationLevelEstimation.html#cb98-8"></a>         <span class="dv">433527</span>,<span class="dv">4170770</span>,<span class="dv">4092896</span>,<span class="dv">259995</span>,<span class="dv">40481632</span>,<span class="dv">4166231</span>,<span class="dv">433577</span>,<span class="dv">4231770</span>,<span class="dv">440329</span>,</span>
<span id="cb98-9"><a href="PopulationLevelEstimation.html#cb98-9"></a>         <span class="dv">4012570</span>,<span class="dv">4012934</span>,<span class="dv">441788</span>,<span class="dv">4201717</span>,<span class="dv">374375</span>,<span class="dv">4344500</span>,<span class="dv">139099</span>,<span class="dv">444132</span>,<span class="dv">196168</span>,</span>
<span id="cb98-10"><a href="PopulationLevelEstimation.html#cb98-10"></a>         <span class="dv">432593</span>,<span class="dv">434203</span>,<span class="dv">438329</span>,<span class="dv">195873</span>,<span class="dv">4083487</span>,<span class="dv">4103703</span>,<span class="dv">4209423</span>,<span class="dv">377572</span>,<span class="dv">40480893</span>,</span>
<span id="cb98-11"><a href="PopulationLevelEstimation.html#cb98-11"></a>         <span class="dv">136368</span>,<span class="dv">140648</span>,<span class="dv">438130</span>,<span class="dv">4091513</span>,<span class="dv">4202045</span>,<span class="dv">373478</span>,<span class="dv">46286594</span>,<span class="dv">439790</span>,<span class="dv">81634</span>,</span>
<span id="cb98-12"><a href="PopulationLevelEstimation.html#cb98-12"></a>         <span class="dv">380706</span>,<span class="dv">141932</span>,<span class="dv">36713918</span>,<span class="dv">443172</span>,<span class="dv">81151</span>,<span class="dv">72748</span>,<span class="dv">378427</span>,<span class="dv">437264</span>,<span class="dv">194083</span>,</span>
<span id="cb98-13"><a href="PopulationLevelEstimation.html#cb98-13"></a>         <span class="dv">140641</span>,<span class="dv">440193</span>,<span class="dv">4115367</span>)</span>
<span id="cb98-14"><a href="PopulationLevelEstimation.html#cb98-14"></a></span>
<span id="cb98-15"><a href="PopulationLevelEstimation.html#cb98-15"></a>tcos &lt;-<span class="st"> </span><span class="kw">createTargetComparatorOutcomes</span>(<span class="dt">targetId =</span> <span class="dv">1</span>,</span>
<span id="cb98-16"><a href="PopulationLevelEstimation.html#cb98-16"></a>                                       <span class="dt">comparatorId =</span> <span class="dv">2</span>,</span>
<span id="cb98-17"><a href="PopulationLevelEstimation.html#cb98-17"></a>                                       <span class="dt">outcomeIds =</span> <span class="kw">c</span>(ois, ncs))</span>
<span id="cb98-18"><a href="PopulationLevelEstimation.html#cb98-18"></a></span>
<span id="cb98-19"><a href="PopulationLevelEstimation.html#cb98-19"></a>tcosList &lt;-<span class="st"> </span><span class="kw">list</span>(tcos)</span></code></pre></div>
<p>Next, we specify what arguments should be used when calling the various functions described previously in our example with one outcome:</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="PopulationLevelEstimation.html#cb99-1"></a>aceI &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1335471</span>,<span class="dv">1340128</span>,<span class="dv">1341927</span>,<span class="dv">1363749</span>,<span class="dv">1308216</span>,<span class="dv">1310756</span>,<span class="dv">1373225</span>,</span>
<span id="cb99-2"><a href="PopulationLevelEstimation.html#cb99-2"></a>          <span class="dv">1331235</span>,<span class="dv">1334456</span>,<span class="dv">1342439</span>)</span>
<span id="cb99-3"><a href="PopulationLevelEstimation.html#cb99-3"></a>thz &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1395058</span>,<span class="dv">974166</span>,<span class="dv">978555</span>,<span class="dv">907013</span>)</span>
<span id="cb99-4"><a href="PopulationLevelEstimation.html#cb99-4"></a></span>
<span id="cb99-5"><a href="PopulationLevelEstimation.html#cb99-5"></a>cs &lt;-<span class="st"> </span><span class="kw">createDefaultCovariateSettings</span>(<span class="dt">excludedCovariateConceptIds =</span> <span class="kw">c</span>(aceI,</span>
<span id="cb99-6"><a href="PopulationLevelEstimation.html#cb99-6"></a>                                                                     thz),</span>
<span id="cb99-7"><a href="PopulationLevelEstimation.html#cb99-7"></a>                                     <span class="dt">addDescendantsToExclude =</span> <span class="ot">TRUE</span>)</span>
<span id="cb99-8"><a href="PopulationLevelEstimation.html#cb99-8"></a></span>
<span id="cb99-9"><a href="PopulationLevelEstimation.html#cb99-9"></a>cmdArgs &lt;-<span class="st"> </span><span class="kw">createGetDbCohortMethodDataArgs</span>(</span>
<span id="cb99-10"><a href="PopulationLevelEstimation.html#cb99-10"></a>  <span class="dt">studyStartDate =</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb99-11"><a href="PopulationLevelEstimation.html#cb99-11"></a>  <span class="dt">studyEndDate =</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb99-12"><a href="PopulationLevelEstimation.html#cb99-12"></a>  <span class="dt">firstExposureOnly =</span> <span class="ot">FALSE</span>,</span>
<span id="cb99-13"><a href="PopulationLevelEstimation.html#cb99-13"></a>  <span class="dt">removeDuplicateSubjects =</span> <span class="ot">FALSE</span>,</span>
<span id="cb99-14"><a href="PopulationLevelEstimation.html#cb99-14"></a>  <span class="dt">restrictToCommonPeriod =</span> <span class="ot">FALSE</span>,</span>
<span id="cb99-15"><a href="PopulationLevelEstimation.html#cb99-15"></a>  <span class="dt">washoutPeriod =</span> <span class="dv">0</span>,</span>
<span id="cb99-16"><a href="PopulationLevelEstimation.html#cb99-16"></a>  <span class="dt">covariateSettings =</span> cs)</span>
<span id="cb99-17"><a href="PopulationLevelEstimation.html#cb99-17"></a></span>
<span id="cb99-18"><a href="PopulationLevelEstimation.html#cb99-18"></a>spArgs &lt;-<span class="st"> </span><span class="kw">createCreateStudyPopulationArgs</span>(</span>
<span id="cb99-19"><a href="PopulationLevelEstimation.html#cb99-19"></a>  <span class="dt">firstExposureOnly =</span> <span class="ot">FALSE</span>,</span>
<span id="cb99-20"><a href="PopulationLevelEstimation.html#cb99-20"></a>  <span class="dt">restrictToCommonPeriod =</span> <span class="ot">FALSE</span>,</span>
<span id="cb99-21"><a href="PopulationLevelEstimation.html#cb99-21"></a>  <span class="dt">washoutPeriod =</span> <span class="dv">0</span>,</span>
<span id="cb99-22"><a href="PopulationLevelEstimation.html#cb99-22"></a>  <span class="dt">removeDuplicateSubjects =</span> <span class="st">&quot;remove all&quot;</span>,</span>
<span id="cb99-23"><a href="PopulationLevelEstimation.html#cb99-23"></a>  <span class="dt">removeSubjectsWithPriorOutcome =</span> <span class="ot">TRUE</span>,</span>
<span id="cb99-24"><a href="PopulationLevelEstimation.html#cb99-24"></a>  <span class="dt">minDaysAtRisk =</span> <span class="dv">1</span>,</span>
<span id="cb99-25"><a href="PopulationLevelEstimation.html#cb99-25"></a>  <span class="dt">startAnchor =</span> <span class="st">&quot;cohort start&quot;</span>,</span>
<span id="cb99-26"><a href="PopulationLevelEstimation.html#cb99-26"></a>  <span class="dt">addExposureDaysToStart =</span> <span class="ot">FALSE</span>,</span>
<span id="cb99-27"><a href="PopulationLevelEstimation.html#cb99-27"></a>  <span class="dt">endAnchor =</span> <span class="st">&quot;cohort end&quot;</span>,</span>
<span id="cb99-28"><a href="PopulationLevelEstimation.html#cb99-28"></a>  <span class="dt">addExposureDaysToEnd =</span> <span class="ot">TRUE</span>)</span>
<span id="cb99-29"><a href="PopulationLevelEstimation.html#cb99-29"></a></span>
<span id="cb99-30"><a href="PopulationLevelEstimation.html#cb99-30"></a>psArgs &lt;-<span class="st"> </span><span class="kw">createCreatePsArgs</span>()</span>
<span id="cb99-31"><a href="PopulationLevelEstimation.html#cb99-31"></a></span>
<span id="cb99-32"><a href="PopulationLevelEstimation.html#cb99-32"></a>matchArgs &lt;-<span class="st"> </span><span class="kw">createMatchOnPsArgs</span>(</span>
<span id="cb99-33"><a href="PopulationLevelEstimation.html#cb99-33"></a>  <span class="dt">caliper =</span> <span class="fl">0.2</span>,</span>
<span id="cb99-34"><a href="PopulationLevelEstimation.html#cb99-34"></a>  <span class="dt">caliperScale =</span> <span class="st">&quot;standardized logit&quot;</span>,</span>
<span id="cb99-35"><a href="PopulationLevelEstimation.html#cb99-35"></a>  <span class="dt">maxRatio =</span> <span class="dv">100</span>)</span>
<span id="cb99-36"><a href="PopulationLevelEstimation.html#cb99-36"></a></span>
<span id="cb99-37"><a href="PopulationLevelEstimation.html#cb99-37"></a>fomArgs &lt;-<span class="st"> </span><span class="kw">createFitOutcomeModelArgs</span>(</span>
<span id="cb99-38"><a href="PopulationLevelEstimation.html#cb99-38"></a>  <span class="dt">modelType =</span> <span class="st">&quot;cox&quot;</span>,</span>
<span id="cb99-39"><a href="PopulationLevelEstimation.html#cb99-39"></a>  <span class="dt">stratified =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<p>We then combine these into a single analysis settings object, which we provide a unique analysis ID and some description. We can combine one or more analysis settings objects into a list:</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="PopulationLevelEstimation.html#cb100-1"></a>cmAnalysis &lt;-<span class="st"> </span><span class="kw">createCmAnalysis</span>(</span>
<span id="cb100-2"><a href="PopulationLevelEstimation.html#cb100-2"></a>  <span class="dt">analysisId =</span> <span class="dv">1</span>,</span>
<span id="cb100-3"><a href="PopulationLevelEstimation.html#cb100-3"></a>  <span class="dt">description =</span> <span class="st">&quot;Propensity score matching&quot;</span>,</span>
<span id="cb100-4"><a href="PopulationLevelEstimation.html#cb100-4"></a>  <span class="dt">getDbCohortMethodDataArgs =</span> cmdArgs,</span>
<span id="cb100-5"><a href="PopulationLevelEstimation.html#cb100-5"></a>  <span class="dt">createStudyPopArgs =</span> spArgs,</span>
<span id="cb100-6"><a href="PopulationLevelEstimation.html#cb100-6"></a>  <span class="dt">createPs =</span> <span class="ot">TRUE</span>,</span>
<span id="cb100-7"><a href="PopulationLevelEstimation.html#cb100-7"></a>  <span class="dt">createPsArgs =</span> psArgs,</span>
<span id="cb100-8"><a href="PopulationLevelEstimation.html#cb100-8"></a>  <span class="dt">matchOnPs =</span> <span class="ot">TRUE</span>,</span>
<span id="cb100-9"><a href="PopulationLevelEstimation.html#cb100-9"></a>  <span class="dt">matchOnPsArgs =</span> matchArgs</span>
<span id="cb100-10"><a href="PopulationLevelEstimation.html#cb100-10"></a>  <span class="dt">fitOutcomeModel =</span> <span class="ot">TRUE</span>,</span>
<span id="cb100-11"><a href="PopulationLevelEstimation.html#cb100-11"></a>  <span class="dt">fitOutcomeModelArgs =</span> fomArgs)</span>
<span id="cb100-12"><a href="PopulationLevelEstimation.html#cb100-12"></a></span>
<span id="cb100-13"><a href="PopulationLevelEstimation.html#cb100-13"></a>cmAnalysisList &lt;-<span class="st"> </span><span class="kw">list</span>(cmAnalysis)</span></code></pre></div>
<p>We can now run the study including all comparisons and analysis settings:</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="PopulationLevelEstimation.html#cb101-1"></a>result &lt;-<span class="st"> </span><span class="kw">runCmAnalyses</span>(<span class="dt">connectionDetails =</span> connectionDetails,</span>
<span id="cb101-2"><a href="PopulationLevelEstimation.html#cb101-2"></a>                        <span class="dt">cdmDatabaseSchema =</span> cdmDatabaseSchema,</span>
<span id="cb101-3"><a href="PopulationLevelEstimation.html#cb101-3"></a>                        <span class="dt">exposureDatabaseSchema =</span> cohortDbSchema,</span>
<span id="cb101-4"><a href="PopulationLevelEstimation.html#cb101-4"></a>                        <span class="dt">exposureTable =</span> cohortTable,</span>
<span id="cb101-5"><a href="PopulationLevelEstimation.html#cb101-5"></a>                        <span class="dt">outcomeDatabaseSchema =</span> cohortDbSchema,</span>
<span id="cb101-6"><a href="PopulationLevelEstimation.html#cb101-6"></a>                        <span class="dt">outcomeTable =</span> cohortTable,</span>
<span id="cb101-7"><a href="PopulationLevelEstimation.html#cb101-7"></a>                        <span class="dt">cdmVersion =</span> cdmVersion,</span>
<span id="cb101-8"><a href="PopulationLevelEstimation.html#cb101-8"></a>                        <span class="dt">outputFolder =</span> outputFolder,</span>
<span id="cb101-9"><a href="PopulationLevelEstimation.html#cb101-9"></a>                        <span class="dt">cmAnalysisList =</span> cmAnalysisList,</span>
<span id="cb101-10"><a href="PopulationLevelEstimation.html#cb101-10"></a>                        <span class="dt">targetComparatorOutcomesList =</span> tcosList)</span></code></pre></div>
<p>The <code>result</code> object contains references to all the artifacts that were created. For example, we can retrieve the outcome model for AMI:</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="PopulationLevelEstimation.html#cb102-1"></a>omFile &lt;-<span class="st"> </span>result<span class="op">$</span>outcomeModelFile[result<span class="op">$</span>targetId <span class="op">==</span><span class="st"> </span><span class="dv">1</span> <span class="op">&amp;</span></span>
<span id="cb102-2"><a href="PopulationLevelEstimation.html#cb102-2"></a><span class="st">                                    </span>result<span class="op">$</span>comparatorId <span class="op">==</span><span class="st"> </span><span class="dv">2</span> <span class="op">&amp;</span></span>
<span id="cb102-3"><a href="PopulationLevelEstimation.html#cb102-3"></a><span class="st">                                    </span>result<span class="op">$</span>outcomeId <span class="op">==</span><span class="st"> </span><span class="dv">4</span> <span class="op">&amp;</span></span>
<span id="cb102-4"><a href="PopulationLevelEstimation.html#cb102-4"></a><span class="st">                                    </span>result<span class="op">$</span>analysisId <span class="op">==</span><span class="st"> </span><span class="dv">1</span>]</span>
<span id="cb102-5"><a href="PopulationLevelEstimation.html#cb102-5"></a>outcomeModel &lt;-<span class="st"> </span><span class="kw">readRDS</span>(<span class="kw">file.path</span>(outputFolder, omFile))</span>
<span id="cb102-6"><a href="PopulationLevelEstimation.html#cb102-6"></a>outcomeModel</span></code></pre></div>
<pre><code>## Model type: cox
## Stratified: TRUE
## Use covariates: FALSE
## Use inverse probability of treatment weighting: FALSE
## Status: OK
## 
##           Estimate lower .95 upper .95   logRr seLogRr
## treatment   1.1338    0.5921    2.1765 0.1256   0.332</code></pre>
<p>We can also retrieve the effect size estimates for all outcomes with one command:</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="PopulationLevelEstimation.html#cb104-1"></a>summ &lt;-<span class="st"> </span><span class="kw">summarizeAnalyses</span>(result, <span class="dt">outputFolder =</span> outputFolder)</span>
<span id="cb104-2"><a href="PopulationLevelEstimation.html#cb104-2"></a><span class="kw">head</span>(summ)</span></code></pre></div>
<pre><code>##     analysisId targetId comparatorId outcomeId        rr    ci95lb  ...
## 1            1        1            2     72748 0.9734698 0.5691589  ...
## 2            1        1            2     73241 0.7067981 0.4009951  ...
## 3            1        1            2     73560 1.0623951 0.7187302  ...
## 4            1        1            2     75911 0.9952184 0.6190344  ...
## 5            1        1            2     76786 1.0861746 0.6730408  ...
## 6            1        1            2     77965 1.1439772 0.5173222  ...</code></pre>
</div>
</div>
<div id="studyOutputs" class="section level2">
<h2><span class="header-section-number">13.9</span> Study outputs</h2>
<p>Our estimates are only valid if several assumptions have been met. We use a wide set of diagnostics to evaluate whether this is the case. These are available in the results produced by the R package generated by ATLAS, or can be generated on the fly using specific R functions.</p>
<div id="propensity-scores-and-model" class="section level3">
<h3><span class="header-section-number">13.9.1</span> Propensity scores and model</h3>
<p>We first need to evaluate whether the target and comparator cohort are to some extent comparable. For this we can compute the Area Under the Receiver Operator Curve (AUC) statistic for the propensity model. An AUC of 1 indicates the treatment assignment was completely predictable based on baseline covariates, and that the two groups are therefore incomparable. We can use the <code>computePsAuc</code> function to compute the AUC, which in our example is 0.79. Using the <code>plotPs</code> function, we can also generate the preference score distribution as shown in Figure <a href="PopulationLevelEstimation.html#fig:ps">13.18</a>. Here we see that for many people the treatment they received was predictable, but there is also a large amount of overlap, indicating that adjustment can be used to select comparable groups. </p>
<div class="figure" style="text-align: center"><span id="fig:ps"></span>
<img src="images/PopulationLevelEstimation/ps.png" alt="Preference score distribution." width="80%" />
<p class="caption">
Figure 13.18: Preference score distribution.
</p>
</div>
<p>In general it is a good idea to also inspect the propensity model itself, and especially so if the model is very predictive. That way we may discover which variables are most predictive. Table <a href="PopulationLevelEstimation.html#tab:psModel">13.7</a> shows the top predictors in our propensity model. Note that if a variable is too predictive, the CohortMethod package will throw an informative error rather than attempt to fit a model that is already known to be perfectly predictive. </p>
<table>
<caption><span id="tab:psModel">Table 13.7: </span> Top 10 predictors in the propensity model for ACEi and THZ. Positive values mean subjects with the covariate are more likely to receive the target treatment.</caption>
<colgroup>
<col width="6%" />
<col width="93%" />
</colgroup>
<thead>
<tr class="header">
<th align="right">Beta</th>
<th align="left">Covariate</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">-1.42</td>
<td align="left">condition_era group during day -30 through 0 days relative to index: Edema</td>
</tr>
<tr class="even">
<td align="right">-1.11</td>
<td align="left">drug_era group during day 0 through 0 days relative to index: Potassium Chloride</td>
</tr>
<tr class="odd">
<td align="right">0.68</td>
<td align="left">age group: 05-09</td>
</tr>
<tr class="even">
<td align="right">0.64</td>
<td align="left">measurement during day -365 through 0 days relative to index: Renin</td>
</tr>
<tr class="odd">
<td align="right">0.63</td>
<td align="left">condition_era group during day -30 through 0 days relative to index: Urticaria</td>
</tr>
<tr class="even">
<td align="right">0.57</td>
<td align="left">condition_era group during day -30 through 0 days relative to index: Proteinuria</td>
</tr>
<tr class="odd">
<td align="right">0.55</td>
<td align="left">drug_era group during day -365 through 0 days relative to index: INSULINS AND ANALOGUES</td>
</tr>
<tr class="even">
<td align="right">-0.54</td>
<td align="left">race = Black or African American</td>
</tr>
<tr class="odd">
<td align="right">0.52</td>
<td align="left">(Intercept)</td>
</tr>
<tr class="even">
<td align="right">0.50</td>
<td align="left">gender = MALE</td>
</tr>
</tbody>
</table>

<div class="rmdimportant">
If a variable is found to be highly predictive, there are two possible conclusions: Either we find that the variable is clearly part of the exposure itself and should be removed before fitting the model, or else we must conclude that the two populations are truly incomparable, and the analysis must be stopped.
</div>

</div>
<div id="covariate-balance" class="section level3">
<h3><span class="header-section-number">13.9.2</span> Covariate balance</h3>
<p>The goal of using PS is to make the two groups comparable (or at least to select comparable groups). We must verify whether this is achieved, for example by checking whether the baseline covariates are indeed balanced after adjustment. We can use the <code>computeCovariateBalance</code> and <code>plotCovariateBalanceScatterPlot</code> functions to generate Figure <a href="PopulationLevelEstimation.html#fig:balance">13.19</a>. One rule-of-thumb to use is that no covariate may have an absolute standardized difference of means greater than 0.1 after propensity score adjustment. Here we see that although there was substantial imbalance before matching, after matching we meet this criterion. </p>
<div class="figure" style="text-align: center"><span id="fig:balance"></span>
<img src="images/PopulationLevelEstimation/balance.png" alt="Covariate balance, showing the absolute standardized difference of mean before and after propensity score matching. Each blue dot represents a covariate." width="70%" />
<p class="caption">
Figure 13.19: Covariate balance, showing the absolute standardized difference of mean before and after propensity score matching. Each blue dot represents a covariate.
</p>
</div>
</div>
<div id="follow-up-and-power" class="section level3">
<h3><span class="header-section-number">13.9.3</span> Follow up and power</h3>
<p>Before fitting an outcome model, we might be interested to know whether we have sufficient power to detect a particular effect size. It makes sense to perform these power calculations once the study population has been fully defined, so taking into account loss to the various inclusion and exclusion criteria (such as no prior outcomes), and loss due to matching and/or trimming. We can view the attrition of subjects in our study using the <code>drawAttritionDiagram</code> function as shown in Figure <a href="PopulationLevelEstimation.html#fig:attrition">13.20</a>. </p>
<div class="figure" style="text-align: center"><span id="fig:attrition"></span>
<img src="images/PopulationLevelEstimation/attrition.png" alt="Attrition diagram. The counts shown at the top are those that meet our target and comparator cohort definitions. The counts at the bottom are those that enter our outcome model, in  this case a Cox regression." width="70%" />
<p class="caption">
Figure 13.20: Attrition diagram. The counts shown at the top are those that meet our target and comparator cohort definitions. The counts at the bottom are those that enter our outcome model, in this case a Cox regression.
</p>
</div>
<p>Since the sample size is fixed in retrospective studies (the data has already been collected), and the true effect size is unknown, it is therefore less meaningful to compute the power given an expected effect size. Instead, the CohortMethod package provides the <code>computeMdrr</code> function to compute the minimum detectable relative risk (MDRR). In our example study the MDRR is 1.69.  </p>
<p>To gain a better understanding of the amount of follow-up available we can also inspect the distribution of follow-up time. We defined follow-up time as time at risk, so not censored by the occurrence of the outcome. The <code>getFollowUpDistribution</code> can provide a simple overview as shown in Figure <a href="PopulationLevelEstimation.html#fig:followUp">13.21</a>, which suggests the follow-up time for both cohorts is comparable.</p>
<div class="figure" style="text-align: center"><span id="fig:followUp"></span>
<img src="images/PopulationLevelEstimation/followUp.png" alt="Distribution of follow-up time for the target and comparator cohorts." width="80%" />
<p class="caption">
Figure 13.21: Distribution of follow-up time for the target and comparator cohorts.
</p>
</div>
</div>
<div id="kaplan-meier" class="section level3">
<h3><span class="header-section-number">13.9.4</span> Kaplan-Meier</h3>
<p>One last check is to review the Kaplan-Meier plot, showing the survival over time in both cohorts. Using the <code>plotKaplanMeier</code> function we can create <a href="PopulationLevelEstimation.html#fig:kmPlot">13.22</a>, which we can check for example if our assumption of proportionality of hazards holds. The Kaplan-Meier plot automatically adjusts for stratification or weighting by PS. In this case, because variable-ratio matching is used, the survival curve for the comparator groups is adjusted to mimick what the curve had looked like for the target group had they been exposued to the comparator instead.  </p>
<div class="figure" style="text-align: center"><span id="fig:kmPlot"></span>
<img src="images/PopulationLevelEstimation/kmPlot.png" alt="Kaplan-Meier plot." width="100%" />
<p class="caption">
Figure 13.22: Kaplan-Meier plot.
</p>
</div>
</div>
<div id="effect-size-estimate" class="section level3">
<h3><span class="header-section-number">13.9.5</span> Effect size estimate</h3>
<p>We observe a hazard ratio of 4.32 (95% confidence interval: 2.45 - 8.08) for angioedema, which tells us that ACEi appears to increase the risk of angioedema compared to THZ. Similarly, we observe a hazard ratio of 1.13 (95% confidence interval: 0.59 - 2.18) for AMI, suggesting little or no effect for AMI. Our diagnostics, as reviewed earlier, give no reason for doubt. However, ultimately the quality of this evidence, and whether we choose to trust it, depends on many factors that are not covererd by the study diagnostics as described in Chapter <a href="EvidenceQuality.html#EvidenceQuality">15</a>.</p>
</div>
</div>
<div id="summary-9" class="section level2">
<h2><span class="header-section-number">13.10</span> Summary</h2>

<div class="rmdsummary">
<ul>
<li><p>Population-level estimation aims to infer causal effects from observational data.</p></li>
<li><p>The <strong>counterfactual</strong>, what would have happened if the subject had received an alternative exposure or no exposure, cannot be observed.</p></li>
<li><p>Different designs aim to construct the counterfactual in different ways.</p></li>
<li><p>The various designs as implemented in the OHDSI Methods Library provide diagnostics to evaluate whether the assumptions for creating an appropriate counterfactual have been met.</p></li>
</ul>
</div>

</div>
<div id="excercises" class="section level2">
<h2><span class="header-section-number">13.11</span> Excercises</h2>
<p>Note: The exercises still have to be defined. The idea is to require readers to define a study that estimates the effect of celecoxib on GI bleed, compared to diclofenac. For this they must use the Eunomia package, which is still under development.</p>

</div>
</div>
<h3>References</h3>
<div id="refs" class="references">
<div id="ref-austin_2011">
<p>Austin, Peter C. 2011. Optimal Caliper Widths for Propensity-Score Matching When Estimating Differences in Means and Differences in Proportions in Observational Studies. <em>Pharmaceutical Statistics</em> 10 (2): 15061.</p>
</div>
<div id="ref-farrington_1995">
<p>Farrington, C. P. 1995. Relative incidence estimation from case series for vaccine safety evaluation. <em>Biometrics</em> 51 (1): 22835.</p>
</div>
<div id="ref-farrington_2011">
<p>Farrington, C. P., Karim Anaya-Izquierdo, Heather J. Whitaker, Mounia N. Hocine, Ian Douglas, and Liam Smeeth. 2011. Self-Controlled Case Series Analysis with Event-Dependent Observation Periods. <em>Journal of the American Statistical Association</em> 106 (494): 41726. <a href="https://doi.org/10.1198/jasa.2011.ap10108">https://doi.org/10.1198/jasa.2011.ap10108</a>.</p>
</div>
<div id="ref-hernan_2002">
<p>Hernan, M. A., S. Hernandez-Diaz, M. M. Werler, and A. A. Mitchell. 2002. Causal knowledge as a prerequisite for confounding evaluation: an application to birth defects epidemiology. <em>Am. J. Epidemiol.</em> 155 (2): 17684.</p>
</div>
<div id="ref-hernan_2016">
<p>Hernan, M. A., and J. M. Robins. 2016. Using Big Data to Emulate a Target Trial When a Randomized Trial Is Not Available. <em>Am. J. Epidemiol.</em> 183 (8): 75864.</p>
</div>
<div id="ref-maclure_1991">
<p>Maclure, M. 1991. The case-crossover design: a method for studying transient effects on the risk of acute events. <em>Am. J. Epidemiol.</em> 133 (2): 14453.</p>
</div>
<div id="ref-magid_2010">
<p>Magid, D. J., S. M. Shetterly, K. L. Margolis, H. M. Tavel, P. J. OConnor, J. V. Selby, and P. M. Ho. 2010. Comparative effectiveness of angiotensin-converting enzyme inhibitors versus beta-blockers as second-line therapy for hypertension. <em>Circ Cardiovasc Qual Outcomes</em> 3 (5): 45358.</p>
</div>
<div id="ref-powers_2012">
<p>Powers, B. J., R. R. Coeytaux, R. J. Dolor, V. Hasselblad, U. D. Patel, W. S. Yancy, R. N. Gray, R. J. Irvine, A. S. Kendrick, and G. D. Sanders. 2012. Updated report on comparative effectiveness of ACE inhibitors, ARBs, and direct renin inhibitors for patients with essential hypertension: much more data, little new information. <em>J Gen Intern Med</em> 27 (6): 71629.</p>
</div>
<div id="ref-rassen_2012">
<p>Rassen, J. A., A. A. Shelat, J. Myers, R. J. Glynn, K. J. Rothman, and S. Schneeweiss. 2012. One-to-many propensity score matching in cohort studies. <em>Pharmacoepidemiol Drug Saf</em> 21 Suppl 2 (May): 6980.</p>
</div>
<div id="ref-rosenbaum_1983">
<p>Rosenbaum, P., and D. Rubin. 1983. The Central Role of the Propensity Score in Observational Studies for Causal Effects. <em>Biometrika</em> 70 (April): 4155. <a href="https://doi.org/10.1093/biomet/70.1.41">https://doi.org/10.1093/biomet/70.1.41</a>.</p>
</div>
<div id="ref-rubin_2001">
<p>Rubin, Donald B. 2001. Using Propensity Scores to Help Design Observational Studies: Application to the Tobacco Litigation. <em>Health Services and Outcomes Research Methodology</em> 2 (3-4): 16988.</p>
</div>
<div id="ref-ryan_2013">
<p>Ryan, P. B., M. J. Schuemie, and D. Madigan. 2013. Empirical performance of a self-controlled cohort method: lessons for developing a risk identification and analysis system. <em>Drug Saf</em> 36 Suppl 1 (October): 95106.</p>
</div>
<div id="ref-sabroe_1997">
<p>Sabroe, R. A., and A. K. Black. 1997. Angiotensin-converting enzyme (ACE) inhibitors and angio-oedema. <em>Br. J. Dermatol.</em> 136 (2): 15358.</p>
</div>
<div id="ref-schneeweiss_2018">
<p>Schneeweiss, S. 2018. Automated data-adaptive analytics for electronic healthcare data to study causal treatment effects. <em>Clin Epidemiol</em> 10: 77188.</p>
</div>
<div id="ref-simpson_2013">
<p>Simpson, S. E., D. Madigan, I. Zorych, M. J. Schuemie, P. B. Ryan, and M. A. Suchard. 2013. Multiple self-controlled case series for large-scale longitudinal observational databases. <em>Biometrics</em> 69 (4): 893902.</p>
</div>
<div id="ref-suchard_2013">
<p>Suchard, M. A., S. E. Simpson, Ivan Zorych, P. B. Ryan, and David Madigan. 2013. Massive Parallelization of Serial Inference Algorithms for a Complex Generalized Linear Model. <em>ACM Trans. Model. Comput. Simul.</em> 23 (1): 10:110:17. <a href="https://doi.org/10.1145/2414416.2414791">https://doi.org/10.1145/2414416.2414791</a>.</p>
</div>
<div id="ref-suissa_1995">
<p>Suissa, S. 1995. The case-time-control design. <em>Epidemiology</em> 6 (3): 24853.</p>
</div>
<div id="ref-tian_2018">
<p>Tian, Y., M. J. Schuemie, and M. A. Suchard. 2018. Evaluating large-scale propensity score performance through real-world and synthetic data experiments. <em>Int J Epidemiol</em> 47 (6): 200514.</p>
</div>
<div id="ref-toh_2012">
<p>Toh, S., M. E. Reichman, M. Houstoun, M. Ross Southworth, X. Ding, A. F. Hernandez, M. Levenson, et al. 2012. Comparative risk for angioedema associated with the use of drugs that target the renin-angiotensin-aldosterone system. <em>Arch. Intern. Med.</em> 172 (20): 15829.</p>
</div>
<div id="ref-vandenbroucke_2012">
<p>Vandenbroucke, J. P., and N. Pearce. 2012. Case-control studies: basic concepts. <em>Int J Epidemiol</em> 41 (5): 14809.</p>
</div>
<div id="ref-walker_2013">
<p>Walker, Alexander M, Amanda R Patrick, Michael S Lauer, Mark C Hornbrook, Matthew G Marin, Richard Platt, Vronique L Roger, Paul Stang, and Sebastian Schneeweiss. 2013. A Tool for Assessing the Feasibility of Comparative Effectiveness Research. <em>Comp Eff Res</em> 3: 1120.</p>
</div>
<div id="ref-whelton_2018">
<p>Whelton, P. K., R. M. Carey, W. S. Aronow, D. E. Casey, K. J. Collins, C. Dennison Himmelfarb, S. M. DePalma, et al. 2018. 2017 ACC/AHA/AAPA/ABC/ACPM/AGS/APhA/ASH/ASPC/NMA/PCNA Guideline for the Prevention, Detection, Evaluation, and Management of High Blood Pressure in Adults: Executive Summary: A Report of the American College of Cardiology/American Heart Association Task Force on Clinical Practice Guidelines. <em>Circulation</em> 138 (17): e426e483.</p>
</div>
<div id="ref-whitaker_2006">
<p>Whitaker, H. J., C. P. Farrington, B. Spiessens, and P. Musonda. 2006. Tutorial in biostatistics: the self-controlled case series method. <em>Stat Med</em> 25 (10): 176897.</p>
</div>
<div id="ref-Wickham_2015">
<p>Wickham, Hadley. 2015. <em>R Packages</em>. 1st ed. OReilly Media, Inc.</p>
</div>
<div id="ref-zaman_2002">
<p>Zaman, M. A., S. Oparil, and D. A. Calhoun. 2002. Drugs targeting the renin-angiotensin-aldosterone system. <em>Nat Rev Drug Discov</em> 1 (8): 62136.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="Characterization.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="PatientLevelPrediction.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/OHDSI/TheBookOfOhdsi/edit/master/PopulationLevelEstimation.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": ["TheBookOfOhdsi.pdf", "TheBookOfOhdsi.epub"],
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
